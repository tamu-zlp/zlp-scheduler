<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Zlp-scheduler</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.12.3/application.js' type='text/javascript'></script>
    <link href='./assets/0.12.3/application.css' media='screen, projection, print' rel='stylesheet' type='text/css' />
    <link rel="shortcut icon" type="image/png" href="./assets/0.12.3/favicon_yellow.png" />
    <link rel="icon" type="image/png" href="./assets/0.12.3/favicon.png" />
  </head>

  <body>
    <div id="loading">
      <img src="./assets/0.12.3/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" class="hide">
      <div class="timestamp">Generated <abbr class="timeago" title="2021-12-04T04:47:51+00:00">2021-12-04T04:47:51+00:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent">
      <span class="yellow">
  84.05%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         92.17
       </span>
    </span> hits/line
    )
  </h2>

  <a name="AllFiles"></a>

  <div>
    <b>30</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>740</b> relevant lines,
    <span class="green"><b>622</b> lines covered</span> and
    <span class="red"><b>118</b> lines missed. </span>
    (<span class="yellow">
  84.05%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#944ffbdddc218e7f05aefec7e4dcc38f991a8b8d" class="src_link" title="app/controllers/admin_controller.rb">app/controllers/admin_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">94.33 %</td>
            <td class="cell--number">223</td>
            <td class="cell--number">141</td>
            <td class="cell--number">133</td>
            <td class="cell--number">8</td>
            <td class="cell--number">8.50</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#60a1d4980bb8786e9064b44adcf0808cf72f60e0" class="src_link" title="app/controllers/application_controller.rb">app/controllers/application_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">92.31 %</td>
            <td class="cell--number">24</td>
            <td class="cell--number">13</td>
            <td class="cell--number">12</td>
            <td class="cell--number">1</td>
            <td class="cell--number">244.62</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#d642c2668f104a10b5b0ae68a7092aa0cb0e6690" class="src_link" title="app/controllers/concerns/scheduler_2.rb">app/controllers/concerns/scheduler_2.rb</a></td>
            <td class="green strong cell--number t-file__coverage">96.00 %</td>
            <td class="cell--number">143</td>
            <td class="cell--number">75</td>
            <td class="cell--number">72</td>
            <td class="cell--number">3</td>
            <td class="cell--number">755.93</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#f466b1ed1ab2efb68b31fb6289940c39348a4c7a" class="src_link" title="app/controllers/password_resets_controller.rb">app/controllers/password_resets_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">85.71 %</td>
            <td class="cell--number">51</td>
            <td class="cell--number">28</td>
            <td class="cell--number">24</td>
            <td class="cell--number">4</td>
            <td class="cell--number">1.29</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#2ec1a4ee20e2ce35325e770796181d7e2e22811c" class="src_link" title="app/controllers/sessions_controller.rb">app/controllers/sessions_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">40</td>
            <td class="cell--number">27</td>
            <td class="cell--number">27</td>
            <td class="cell--number">0</td>
            <td class="cell--number">42.96</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#2e1df349878103c723bb2d9cc44ed915f5f3bf5b" class="src_link" title="app/controllers/student_controller.rb">app/controllers/student_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">95.33 %</td>
            <td class="cell--number">214</td>
            <td class="cell--number">150</td>
            <td class="cell--number">143</td>
            <td class="cell--number">7</td>
            <td class="cell--number">24.82</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#2c84daa5251fa2a4d61ddba5f93e48f9688cb58a" class="src_link" title="app/controllers/users_controller.rb">app/controllers/users_controller.rb</a></td>
            <td class="red strong cell--number t-file__coverage">64.58 %</td>
            <td class="cell--number">148</td>
            <td class="cell--number">96</td>
            <td class="cell--number">62</td>
            <td class="cell--number">34</td>
            <td class="cell--number">2.40</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#fe7042ae957a64675df316ca38f372d8604f919f" class="src_link" title="app/helpers/application_helper.rb">app/helpers/application_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#f17f06cec2da50e09453374ae9dff70a6c8500b4" class="src_link" title="app/helpers/course_scraper.rb">app/helpers/course_scraper.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">82.76 %</td>
            <td class="cell--number">90</td>
            <td class="cell--number">58</td>
            <td class="cell--number">48</td>
            <td class="cell--number">10</td>
            <td class="cell--number">13.71</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#eb3298652441930d201a5ba53aa332b3f40624bf" class="src_link" title="app/helpers/login_helper.rb">app/helpers/login_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#5e2ccc2a2b11077a7575c5767a6d7df11c82f557" class="src_link" title="app/helpers/password_resets_helper.rb">app/helpers/password_resets_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#6deb98ecefd0309334132b3862d4862a7d457ca5" class="src_link" title="app/helpers/sessions_helper.rb">app/helpers/sessions_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#efbc13902ba9bcb966b5f81b5e9eb3e9a81cca57" class="src_link" title="app/helpers/student_actions_helper.rb">app/helpers/student_actions_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#dad0decafc7df198fedf3d93d8b8168624af8037" class="src_link" title="app/helpers/users_helper.rb">app/helpers/users_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#b507f298571d1a2d00d58fa08c10094047f8c282" class="src_link" title="app/helpers/view_terms_helper.rb">app/helpers/view_terms_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#646b9607279b6ade9abdae6d530f73db8a1d1c6e" class="src_link" title="app/jobs/application_job.rb">app/jobs/application_job.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#bc9b7fc1d98fbb43d2ee09626770f1e240a57cfb" class="src_link" title="app/jobs/load_courses_job.rb">app/jobs/load_courses_job.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">10</td>
            <td class="cell--number">6</td>
            <td class="cell--number">6</td>
            <td class="cell--number">0</td>
            <td class="cell--number">4.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#2718ffdb03089b17618335cad37c2658e7a1ac01" class="src_link" title="app/mailers/application_mailer.rb">app/mailers/application_mailer.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">5</td>
            <td class="cell--number">3</td>
            <td class="cell--number">3</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#46092d0d3320fdbff0551ed21adba7aa5716b268" class="src_link" title="app/mailers/user_mailer.rb">app/mailers/user_mailer.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">8</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.50</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#10726e1a37673315ac6319fb50134c1b4d3598fd" class="src_link" title="app/models/application_record.rb">app/models/application_record.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">3</td>
            <td class="cell--number">2</td>
            <td class="cell--number">2</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#9bf74aba4dd6456ffad785772e0b777ec8af2f2b" class="src_link" title="app/models/cohort.rb">app/models/cohort.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">5</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#a4fa5fbc6a827fba5392a113c7020f009a96efd6" class="src_link" title="app/models/conflict.rb">app/models/conflict.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">6</td>
            <td class="cell--number">5</td>
            <td class="cell--number">5</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#0dc13c88c946526be117eba8fe2e79b5de965522" class="src_link" title="app/models/course.rb">app/models/course.rb</a></td>
            <td class="red strong cell--number t-file__coverage">30.43 %</td>
            <td class="cell--number">88</td>
            <td class="cell--number">46</td>
            <td class="cell--number">14</td>
            <td class="cell--number">32</td>
            <td class="cell--number">0.43</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#eac40f5f58d406db0ebfbfb4f76f2813c3143a75" class="src_link" title="app/models/schedule.rb">app/models/schedule.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">5</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#1572d6b49055e111edc85d212f4f46ab3dacdea8" class="src_link" title="app/models/schedule_to_course.rb">app/models/schedule_to_course.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">4</td>
            <td class="cell--number">3</td>
            <td class="cell--number">3</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#59a9c4ea6d4843a161beb71122c9422c172c961f" class="src_link" title="app/models/student_action.rb">app/models/student_action.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">11</td>
            <td class="cell--number">6</td>
            <td class="cell--number">6</td>
            <td class="cell--number">0</td>
            <td class="cell--number">3.17</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#4a1c864b941f306fc4fecff125e2bc2dc43ee8f0" class="src_link" title="app/models/subject.rb">app/models/subject.rb</a></td>
            <td class="red strong cell--number t-file__coverage">61.54 %</td>
            <td class="cell--number">17</td>
            <td class="cell--number">13</td>
            <td class="cell--number">8</td>
            <td class="cell--number">5</td>
            <td class="cell--number">2.46</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#0bcdf1d7f3a7dbfb473d8769c7240e658b42e39e" class="src_link" title="app/models/term.rb">app/models/term.rb</a></td>
            <td class="red strong cell--number t-file__coverage">39.13 %</td>
            <td class="cell--number">41</td>
            <td class="cell--number">23</td>
            <td class="cell--number">9</td>
            <td class="cell--number">14</td>
            <td class="cell--number">1.17</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#0c9dd5504f6d3d4dd53ddccc0a3af5bf12da646c" class="src_link" title="app/models/time_slot.rb">app/models/time_slot.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">4</td>
            <td class="cell--number">3</td>
            <td class="cell--number">3</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#9c6d950d035f066d500a271eb9abe824b9f10e8b" class="src_link" title="app/models/user.rb">app/models/user.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">42</td>
            <td class="cell--number">22</td>
            <td class="cell--number">22</td>
            <td class="cell--number">0</td>
            <td class="cell--number">46.68</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>


        
          <div class="file_list_container" id="Controllers">
  <h2>
    <span class="group_name">Controllers</span>
    (<span class="covered_percent">
      <span class="yellow">
  89.25%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         124.95
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Controllers"></a>

  <div>
    <b>7</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>530</b> relevant lines,
    <span class="green"><b>473</b> lines covered</span> and
    <span class="red"><b>57</b> lines missed. </span>
    (<span class="yellow">
  89.25%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#944ffbdddc218e7f05aefec7e4dcc38f991a8b8d" class="src_link" title="app/controllers/admin_controller.rb">app/controllers/admin_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">94.33 %</td>
            <td class="cell--number">223</td>
            <td class="cell--number">141</td>
            <td class="cell--number">133</td>
            <td class="cell--number">8</td>
            <td class="cell--number">8.50</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#60a1d4980bb8786e9064b44adcf0808cf72f60e0" class="src_link" title="app/controllers/application_controller.rb">app/controllers/application_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">92.31 %</td>
            <td class="cell--number">24</td>
            <td class="cell--number">13</td>
            <td class="cell--number">12</td>
            <td class="cell--number">1</td>
            <td class="cell--number">244.62</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#d642c2668f104a10b5b0ae68a7092aa0cb0e6690" class="src_link" title="app/controllers/concerns/scheduler_2.rb">app/controllers/concerns/scheduler_2.rb</a></td>
            <td class="green strong cell--number t-file__coverage">96.00 %</td>
            <td class="cell--number">143</td>
            <td class="cell--number">75</td>
            <td class="cell--number">72</td>
            <td class="cell--number">3</td>
            <td class="cell--number">755.93</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#f466b1ed1ab2efb68b31fb6289940c39348a4c7a" class="src_link" title="app/controllers/password_resets_controller.rb">app/controllers/password_resets_controller.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">85.71 %</td>
            <td class="cell--number">51</td>
            <td class="cell--number">28</td>
            <td class="cell--number">24</td>
            <td class="cell--number">4</td>
            <td class="cell--number">1.29</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#2ec1a4ee20e2ce35325e770796181d7e2e22811c" class="src_link" title="app/controllers/sessions_controller.rb">app/controllers/sessions_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">40</td>
            <td class="cell--number">27</td>
            <td class="cell--number">27</td>
            <td class="cell--number">0</td>
            <td class="cell--number">42.96</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#2e1df349878103c723bb2d9cc44ed915f5f3bf5b" class="src_link" title="app/controllers/student_controller.rb">app/controllers/student_controller.rb</a></td>
            <td class="green strong cell--number t-file__coverage">95.33 %</td>
            <td class="cell--number">214</td>
            <td class="cell--number">150</td>
            <td class="cell--number">143</td>
            <td class="cell--number">7</td>
            <td class="cell--number">24.82</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#2c84daa5251fa2a4d61ddba5f93e48f9688cb58a" class="src_link" title="app/controllers/users_controller.rb">app/controllers/users_controller.rb</a></td>
            <td class="red strong cell--number t-file__coverage">64.58 %</td>
            <td class="cell--number">148</td>
            <td class="cell--number">96</td>
            <td class="cell--number">62</td>
            <td class="cell--number">34</td>
            <td class="cell--number">2.40</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Channels">
  <h2>
    <span class="group_name">Channels</span>
    (<span class="covered_percent">
      <span class="green">
  100.0%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Channels"></a>

  <div>
    <b>0</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>0</b> relevant lines,
    <span class="green"><b>0</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed. </span>
    (<span class="green">
  100.0%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Models">
  <h2>
    <span class="group_name">Models</span>
    (<span class="covered_percent">
      <span class="red">
  61.07%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         8.75
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Models"></a>

  <div>
    <b>11</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>131</b> relevant lines,
    <span class="green"><b>80</b> lines covered</span> and
    <span class="red"><b>51</b> lines missed. </span>
    (<span class="red">
  61.07%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#10726e1a37673315ac6319fb50134c1b4d3598fd" class="src_link" title="app/models/application_record.rb">app/models/application_record.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">3</td>
            <td class="cell--number">2</td>
            <td class="cell--number">2</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#9bf74aba4dd6456ffad785772e0b777ec8af2f2b" class="src_link" title="app/models/cohort.rb">app/models/cohort.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">5</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#a4fa5fbc6a827fba5392a113c7020f009a96efd6" class="src_link" title="app/models/conflict.rb">app/models/conflict.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">6</td>
            <td class="cell--number">5</td>
            <td class="cell--number">5</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#0dc13c88c946526be117eba8fe2e79b5de965522" class="src_link" title="app/models/course.rb">app/models/course.rb</a></td>
            <td class="red strong cell--number t-file__coverage">30.43 %</td>
            <td class="cell--number">88</td>
            <td class="cell--number">46</td>
            <td class="cell--number">14</td>
            <td class="cell--number">32</td>
            <td class="cell--number">0.43</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#eac40f5f58d406db0ebfbfb4f76f2813c3143a75" class="src_link" title="app/models/schedule.rb">app/models/schedule.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">5</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#1572d6b49055e111edc85d212f4f46ab3dacdea8" class="src_link" title="app/models/schedule_to_course.rb">app/models/schedule_to_course.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">4</td>
            <td class="cell--number">3</td>
            <td class="cell--number">3</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#59a9c4ea6d4843a161beb71122c9422c172c961f" class="src_link" title="app/models/student_action.rb">app/models/student_action.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">11</td>
            <td class="cell--number">6</td>
            <td class="cell--number">6</td>
            <td class="cell--number">0</td>
            <td class="cell--number">3.17</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#4a1c864b941f306fc4fecff125e2bc2dc43ee8f0" class="src_link" title="app/models/subject.rb">app/models/subject.rb</a></td>
            <td class="red strong cell--number t-file__coverage">61.54 %</td>
            <td class="cell--number">17</td>
            <td class="cell--number">13</td>
            <td class="cell--number">8</td>
            <td class="cell--number">5</td>
            <td class="cell--number">2.46</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#0bcdf1d7f3a7dbfb473d8769c7240e658b42e39e" class="src_link" title="app/models/term.rb">app/models/term.rb</a></td>
            <td class="red strong cell--number t-file__coverage">39.13 %</td>
            <td class="cell--number">41</td>
            <td class="cell--number">23</td>
            <td class="cell--number">9</td>
            <td class="cell--number">14</td>
            <td class="cell--number">1.17</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#0c9dd5504f6d3d4dd53ddccc0a3af5bf12da646c" class="src_link" title="app/models/time_slot.rb">app/models/time_slot.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">4</td>
            <td class="cell--number">3</td>
            <td class="cell--number">3</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#9c6d950d035f066d500a271eb9abe824b9f10e8b" class="src_link" title="app/models/user.rb">app/models/user.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">42</td>
            <td class="cell--number">22</td>
            <td class="cell--number">22</td>
            <td class="cell--number">0</td>
            <td class="cell--number">46.68</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Mailers">
  <h2>
    <span class="group_name">Mailers</span>
    (<span class="covered_percent">
      <span class="green">
  100.0%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         1.29
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Mailers"></a>

  <div>
    <b>2</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>7</b> relevant lines,
    <span class="green"><b>7</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed. </span>
    (<span class="green">
  100.0%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#2718ffdb03089b17618335cad37c2658e7a1ac01" class="src_link" title="app/mailers/application_mailer.rb">app/mailers/application_mailer.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">5</td>
            <td class="cell--number">3</td>
            <td class="cell--number">3</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#46092d0d3320fdbff0551ed21adba7aa5716b268" class="src_link" title="app/mailers/user_mailer.rb">app/mailers/user_mailer.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">8</td>
            <td class="cell--number">4</td>
            <td class="cell--number">4</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.50</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Helpers">
  <h2>
    <span class="group_name">Helpers</span>
    (<span class="covered_percent">
      <span class="yellow">
  84.62%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         12.34
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Helpers"></a>

  <div>
    <b>8</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>65</b> relevant lines,
    <span class="green"><b>55</b> lines covered</span> and
    <span class="red"><b>10</b> lines missed. </span>
    (<span class="yellow">
  84.62%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#fe7042ae957a64675df316ca38f372d8604f919f" class="src_link" title="app/helpers/application_helper.rb">app/helpers/application_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#f17f06cec2da50e09453374ae9dff70a6c8500b4" class="src_link" title="app/helpers/course_scraper.rb">app/helpers/course_scraper.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">82.76 %</td>
            <td class="cell--number">90</td>
            <td class="cell--number">58</td>
            <td class="cell--number">48</td>
            <td class="cell--number">10</td>
            <td class="cell--number">13.71</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#eb3298652441930d201a5ba53aa332b3f40624bf" class="src_link" title="app/helpers/login_helper.rb">app/helpers/login_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#5e2ccc2a2b11077a7575c5767a6d7df11c82f557" class="src_link" title="app/helpers/password_resets_helper.rb">app/helpers/password_resets_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#6deb98ecefd0309334132b3862d4862a7d457ca5" class="src_link" title="app/helpers/sessions_helper.rb">app/helpers/sessions_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#efbc13902ba9bcb966b5f81b5e9eb3e9a81cca57" class="src_link" title="app/helpers/student_actions_helper.rb">app/helpers/student_actions_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#dad0decafc7df198fedf3d93d8b8168624af8037" class="src_link" title="app/helpers/users_helper.rb">app/helpers/users_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#b507f298571d1a2d00d58fa08c10094047f8c282" class="src_link" title="app/helpers/view_terms_helper.rb">app/helpers/view_terms_helper.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Jobs">
  <h2>
    <span class="group_name">Jobs</span>
    (<span class="covered_percent">
      <span class="green">
  100.0%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         3.57
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Jobs"></a>

  <div>
    <b>2</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>7</b> relevant lines,
    <span class="green"><b>7</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed. </span>
    (<span class="green">
  100.0%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#646b9607279b6ade9abdae6d530f73db8a1d1c6e" class="src_link" title="app/jobs/application_job.rb">app/jobs/application_job.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">2</td>
            <td class="cell--number">1</td>
            <td class="cell--number">1</td>
            <td class="cell--number">0</td>
            <td class="cell--number">1.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#bc9b7fc1d98fbb43d2ee09626770f1e240a57cfb" class="src_link" title="app/jobs/load_courses_job.rb">app/jobs/load_courses_job.rb</a></td>
            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">10</td>
            <td class="cell--number">6</td>
            <td class="cell--number">6</td>
            <td class="cell--number">0</td>
            <td class="cell--number">4.00</td>
            
          </tr>
        
      </tbody>
    </table>
  </div>
</div>

        
          <div class="file_list_container" id="Libraries">
  <h2>
    <span class="group_name">Libraries</span>
    (<span class="covered_percent">
      <span class="green">
  100.0%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.0
       </span>
    </span> hits/line
    )
  </h2>

  <a name="Libraries"></a>

  <div>
    <b>0</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>0</b> relevant lines,
    <span class="green"><b>0</b> lines covered</span> and
    <span class="red"><b>0</b> lines missed. </span>
    (<span class="green">
  100.0%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
      </tbody>
    </table>
  </div>
</div>

        
      </div>

      <div id="footer">
        Generated by <a href="https://github.com/simplecov-ruby/simplecov">simplecov</a> v0.21.2
        and simplecov-html v0.12.3<br/>
        using Cucumber Features
      </div>

      <div class="source_files">
      
        <div class="source_table" id="944ffbdddc218e7f05aefec7e4dcc38f991a8b8d">
  <div class="header">
    <h3>app/controllers/admin_controller.rb</h3>
    <h4>
      <span class="green">
  94.33%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>141</b> relevant lines.
      <span class="green"><b>133</b> lines covered</span> and
      <span class="red"><b>8</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class AdminController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  before_action :require_admin, only: [:view_term_admin, :open_semester, :new_term, :update_term, :manage_cohorts, :add_cohort, :manage_administrators, :view_result]    </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def view_term_admin</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="98" data-linenumber="7">
            <span class="hits">98</span>
            

            

            <code class="ruby">    @term = Term.find_by active: 1;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="98" data-linenumber="8">
            <span class="hits">98</span>
            

            

            <code class="ruby">    @cohorts = @term.cohorts.order(name: :asc)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="11">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def open_semester</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="20" data-linenumber="12">
            <span class="hits">20</span>
            

            

            <code class="ruby">    @term = Term.find_by active: 1;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="15">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def new_term</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21" data-linenumber="16">
            <span class="hits">21</span>
            

            

            <code class="ruby">    if flash[:selected_term_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="17">
            <span class="hits">1</span>
            

            

            <code class="ruby">      @term = Term.find(flash[:selected_term_id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="20" data-linenumber="19">
            <span class="hits">20</span>
            

            

            <code class="ruby">      @term = Term.find_by active: 1;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21" data-linenumber="21">
            <span class="hits">21</span>
            

            

            <code class="ruby">    @cohorts = Cohort.all.order(name: :asc)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21" data-linenumber="22">
            <span class="hits">21</span>
            

            

            <code class="ruby">    @cohort_names = []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="21" data-linenumber="23">
            <span class="hits">21</span>
            

            

            <code class="ruby">    @cohorts.each do |s|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="47" data-linenumber="24">
            <span class="hits">47</span>
            

            

            <code class="ruby">      @cohort_names.push(s.name)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="28">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update_term</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35" data-linenumber="29">
            <span class="hits">35</span>
            

            

            <code class="ruby">    if params[:term][:name]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby">      ##updating active term</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">      # check for selected cohorts before updating anything</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="18" data-linenumber="32">
            <span class="hits">18</span>
            

            

            <code class="ruby">      @term = Term.find(params[:term][:name])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="18" data-linenumber="33">
            <span class="hits">18</span>
            

            

            <code class="ruby">      if not params[:Cohorts]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="34">
            <span class="hits">1</span>
            

            

            <code class="ruby">        flash[:notice] = &quot;Please select at least one cohort.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="35">
            <span class="hits">1</span>
            

            

            <code class="ruby">        redirect_to new_term_path, flash: {selected_term_id: @term.id} and return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby">      </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="38">
            <span class="hits">17</span>
            

            

            <code class="ruby">      Term.update_all active: false</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="39">
            <span class="hits">17</span>
            

            

            <code class="ruby">      @term = Term.find(params[:term][:name])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="40">
            <span class="hits">17</span>
            

            

            <code class="ruby">      if @term.update_attributes(:active =&gt; true)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="41">
            <span class="hits">17</span>
            

            

            <code class="ruby">        @cohorts = params[:Cohorts]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="42">
            <span class="hits">17</span>
            

            

            <code class="ruby">        @cohorts.each do |c|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="43">
            <span class="hits">17</span>
            

            

            <code class="ruby">          add_cohort = Cohort.where(:name =&gt; c)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="44">
            <span class="hits">17</span>
            

            

            <code class="ruby">          @term.cohorts.push(add_cohort)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="46">
            <span class="hits">17</span>
            

            

            <code class="ruby">        @scheduletocourse = ScheduleToCourse.all</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="47">
            <span class="hits">17</span>
            

            

            <code class="ruby">        @scheduletocourse.each do |s|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="48">
            
            

            

            <code class="ruby">          s.destroy</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="50">
            <span class="hits">17</span>
            

            

            <code class="ruby">        @schedules = Schedule.all</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="51">
            <span class="hits">17</span>
            

            

            <code class="ruby">        @schedules.each do |s|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="52">
            
            

            

            <code class="ruby">          s.destroy</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="53">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="54">
            <span class="hits">17</span>
            

            

            <code class="ruby">        flash[:notice] = &#39;Term activated!&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="55">
            <span class="hits">17</span>
            

            

            <code class="ruby">        redirect_to view_term_admin_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="56">
            
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="57">
            
            

            

            <code class="ruby">        redirect_to new_term_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="59">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="60">
            
            

            

            <code class="ruby">      ##updating open and close dates</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="61">
            <span class="hits">17</span>
            

            

            <code class="ruby">      @term = Term.find_by active: 1</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="62">
            <span class="hits">17</span>
            

            

            <code class="ruby">      open = DateTime.new(params[:term][&#39;opendate(1i)&#39;].to_i, params[:term][&#39;opendate(2i)&#39;].to_i, params[:term][&#39;opendate(3i)&#39;].to_i, params[:term][&#39;opendate(4i)&#39;].to_i, params[:term][&#39;opendate(5i)&#39;].to_i)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="63">
            <span class="hits">17</span>
            

            

            <code class="ruby">      close = DateTime.new(params[:term][&#39;closedate(1i)&#39;].to_i, params[:term][&#39;closedate(2i)&#39;].to_i, params[:term][&#39;closedate(3i)&#39;].to_i, params[:term][&#39;closedate(4i)&#39;].to_i, params[:term][&#39;closedate(5i)&#39;].to_i)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="64">
            <span class="hits">17</span>
            

            

            <code class="ruby">      LoadCoursesJob.perform_later @term</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="65">
            
            

            

            <code class="ruby">      #LoadCoursesJob.set(wait_until: 2.hours.until.open).perform_later(@term)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="66">
            <span class="hits">17</span>
            

            

            <code class="ruby">      if @term.update_attributes(:opendate =&gt; open) &amp;&amp; @term.update_attributes(:closedate =&gt; close)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="67">
            <span class="hits">17</span>
            

            

            <code class="ruby">        flash[:notice] = &#39;Term open dates updated.&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="68">
            <span class="hits">17</span>
            

            

            <code class="ruby">        redirect_to view_term_admin_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="69">
            
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="70">
            
            

            

            <code class="ruby">        flash[:notice] = &#39;Error - please try again.&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="71">
            
            

            

            <code class="ruby">        redirect_to new_term_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="72">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="73">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="74">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="75">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="76">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def load_terms</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="77">
            
            

            

            <code class="ruby">    #grab more term data</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="78">
            
            

            

            <code class="ruby">    Term.ImportTermList!</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="79">
            
            

            

            <code class="ruby">    #refresh the page</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="80">
            
            

            

            <code class="ruby">    flash[:notice] = &#39;Terms loaded!&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="81">
            
            

            

            <code class="ruby">    redirect_to new_term_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="82">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="83">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="84">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def manage_cohorts </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14" data-linenumber="85">
            <span class="hits">14</span>
            

            

            <code class="ruby">    @cohorts = Cohort.all.order(name: :asc)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="86">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="87">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="88">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def add_cohort</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="89">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="90">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="91">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def view_cohort_semester</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="92">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="28" data-linenumber="93">
            <span class="hits">28</span>
            

            

            <code class="ruby">    @cohort = Cohort.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="28" data-linenumber="94">
            <span class="hits">28</span>
            

            

            <code class="ruby">    @users = @cohort.users.order(lastname: :asc)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="95">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="28" data-linenumber="96">
            <span class="hits">28</span>
            

            

            <code class="ruby">    date_dict = { &quot;M&quot; =&gt; &quot;Monday&quot;, &quot;T&quot; =&gt; &quot;Tuesday&quot;, &quot;W&quot; =&gt; &quot;Wednesday&quot;, &quot;TR&quot; =&gt; &quot;Thursday&quot;, &quot;F&quot; =&gt; &quot;Friday&quot;}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="97">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="28" data-linenumber="98">
            <span class="hits">28</span>
            

            

            <code class="ruby">    if @cohort.chosen_time.present?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="99">
            <span class="hits">9</span>
            

            

            <code class="ruby">      chosen_timeslot = TimeSlot.find(@cohort.chosen_time)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="100">
            <span class="hits">9</span>
            

            

            <code class="ruby">      chosen_time_start = chosen_timeslot.time</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="101">
            <span class="hits">9</span>
            

            

            <code class="ruby">      chosen_time_end = chosen_time_start.advance(:hours =&gt; 2)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="102">
            <span class="hits">9</span>
            

            

            <code class="ruby">      @chosen_time = chosen_time_start.strftime(&quot;%H:%M&quot;) + &quot; - &quot; + chosen_time_end.strftime(&quot;%H:%M&quot;) + &quot; &quot; + date_dict[chosen_timeslot.day]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="103">
            
            

            

            <code class="ruby">      </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="104">
            <span class="hits">9</span>
            

            

            <code class="ruby">      if @cohort.flag == 1</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="105">
            <span class="hits">2</span>
            

            

            <code class="ruby">        @schedule_change_warning = true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="106">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="107">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="108">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="109">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="110">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="111">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def delete_cohort</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="112">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @cohort = Cohort.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="113">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @cohort.destroy</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="114">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="115">
            <span class="hits">1</span>
            

            

            <code class="ruby">    flash[:notice] = &#39;Cohort deleted!&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="116">
            <span class="hits">1</span>
            

            

            <code class="ruby">    redirect_to manage_cohorts_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="117">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="118">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="119">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def manage_administrators</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="120">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @admins = User.where(:role =&gt; &#39;admin&#39;).order(lastname: :asc)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="121">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="122">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="123">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def add_admin</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="124">
            <span class="hits">9</span>
            

            

            <code class="ruby">    @user = User.new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="125">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="126">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="127">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def delete_admin</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="128">
            <span class="hits">3</span>
            

            

            <code class="ruby">    @admins = User.where(:role =&gt; &#39;admin&#39;)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="129">
            <span class="hits">3</span>
            

            

            <code class="ruby">    if @admins.length == 1</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="130">
            <span class="hits">1</span>
            

            

            <code class="ruby">      flash[:warning] = &quot;There must be at least 1 administrator at all times.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="131">
            <span class="hits">1</span>
            

            

            <code class="ruby">      redirect_to manage_administrators_path and return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="132">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="133">
            <span class="hits">2</span>
            

            

            <code class="ruby">    id = session[:user_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="134">
            <span class="hits">2</span>
            

            

            <code class="ruby">    @user = User.find(id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="135">
            <span class="hits">2</span>
            

            

            <code class="ruby">    @admin = User.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="136">
            <span class="hits">2</span>
            

            

            <code class="ruby">    if @user == @admin</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="137">
            <span class="hits">1</span>
            

            

            <code class="ruby">      @admin.destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="138">
            <span class="hits">1</span>
            

            

            <code class="ruby">      flash[:warning] = &quot;You have deleted yourself.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="139">
            <span class="hits">1</span>
            

            

            <code class="ruby">      session[:user_id] = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="140">
            <span class="hits">1</span>
            

            

            <code class="ruby">      redirect_to &quot;/&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="141">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="142">
            <span class="hits">1</span>
            

            

            <code class="ruby">      @admin.destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="143">
            <span class="hits">1</span>
            

            

            <code class="ruby">      flash[:notice] = &quot;Administrator deleted!&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="144">
            <span class="hits">1</span>
            

            

            <code class="ruby">      redirect_to manage_administrators_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="145">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="146">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="147">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="148">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def run_algorithm</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="149">
            <span class="hits">7</span>
            

            

            <code class="ruby">    @cohort = Cohort.find(params[:cohort_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="150">
            <span class="hits">7</span>
            

            

            <code class="ruby">    @cohort.flag = 0</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="151">
            <span class="hits">7</span>
            

            

            <code class="ruby">    @cohort.save()</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="152">
            <span class="hits">7</span>
            

            

            <code class="ruby">    Scheduler_2.Generate_time_slots(@cohort)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="153">
            <span class="hits">7</span>
            

            

            <code class="ruby">    flash[:notice] = &quot;The algorithm is finished!&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="154">
            <span class="hits">7</span>
            

            

            <code class="ruby">    redirect_to view_cohort_semester_path(params[:cohort_id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="155">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="156">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="157">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def change_access</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="158">
            <span class="hits">3</span>
            

            

            <code class="ruby">    @cohort = Cohort.find(params[:cohort_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="159">
            <span class="hits">3</span>
            

            

            <code class="ruby">    if @cohort.modi.nil? || @cohort.modi?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="160">
            <span class="hits">2</span>
            

            

            <code class="ruby">      @cohort.update_attributes(:modi =&gt; false)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="161">
            <span class="hits">2</span>
            

            

            <code class="ruby">      flash[:notice] = &quot;Student Modification Disabled&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="162">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="163">
            <span class="hits">1</span>
            

            

            <code class="ruby">      @cohort.update_attributes(:modi =&gt; true)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="164">
            <span class="hits">1</span>
            

            

            <code class="ruby">      flash[:notice] = &quot;Student Modification Enabled&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="165">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="166">
            <span class="hits">3</span>
            

            

            <code class="ruby">    redirect_to view_cohort_semester_path(params[:cohort_id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="167">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="168">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="169">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def view_result</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="170">
            <span class="hits">7</span>
            

            

            <code class="ruby">    @cohort = Cohort.find(params[:cohort_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="171">
            <span class="hits">7</span>
            

            

            <code class="ruby">    @date_dict = { &quot;M&quot; =&gt; &quot;Monday&quot;, &quot;T&quot; =&gt; &quot;Tuesday&quot;, &quot;W&quot; =&gt; &quot;Wednesday&quot;, &quot;TR&quot; =&gt; &quot;Thursday&quot;, &quot;F&quot; =&gt; &quot;Friday&quot;}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="172">
            <span class="hits">7</span>
            

            

            <code class="ruby">    @results = TimeSlot.where(:was_conflict =&gt; false, :cohort_id =&gt; @cohort.id).order(cost: :asc,id: :asc).limit(200)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="173">
            <span class="hits">7</span>
            

            

            <code class="ruby">    @conflicts = TimeSlot.where(:was_conflict =&gt; true, :cohort_id =&gt; @cohort.id).order(cost: :asc,id: :asc).limit(100)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="174">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="175">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="176">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def view_conflicts</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="177">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @cohort = Cohort.find(params[:cohort_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="178">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @final_result = []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="179">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @conflict = TimeSlot.find(params[:conflict_id]).conflicts</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="180">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @mandatory_dict = {false =&gt; &quot;False&quot;, true =&gt; &quot;True&quot;}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="181">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @conflict.each do |conf|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="182">
            <span class="hits">1</span>
            

            

            <code class="ruby">      if conf.user_id.present?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="183">
            <span class="hits">1</span>
            

            

            <code class="ruby">        student = User.find(conf.user_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="184">
            <span class="hits">1</span>
            

            

            <code class="ruby">        name = student.firstname + &#39; &#39; + student.lastname</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="185">
            
            

            

            <code class="ruby">        </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="186">
            <span class="hits">1</span>
            

            

            <code class="ruby">        course = Course.find(conf.course_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="187">
            <span class="hits">1</span>
            

            

            <code class="ruby">        time = course.meetingtime_start.strftime(&quot;%H:%M&quot;)  + &quot; - &quot; + course.meetingtime_end.strftime(&quot;%H:%M&quot;) </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="188">
            <span class="hits">1</span>
            

            

            <code class="ruby">        subject = Subject.find(course.subject_id).subject_code</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="189">
            <span class="hits">1</span>
            

            

            <code class="ruby">        final_subject = subject + &#39; &#39; + course.course_number.to_s</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="190">
            <span class="hits">1</span>
            

            

            <code class="ruby">        section_number = course.section_number</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="191">
            
            

            

            <code class="ruby">        </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="192">
            
            

            

            <code class="ruby">        </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="193">
            <span class="hits">1</span>
            

            

            <code class="ruby">        schedule_to_course = ScheduleToCourse.find_by(schedule_id: conf.schedule_id, course_id: course.id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="194">
            <span class="hits">1</span>
            

            

            <code class="ruby">        mandatory_value = schedule_to_course.mandatory</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="195">
            
            

            

            <code class="ruby">        </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="196">
            <span class="hits">1</span>
            

            

            <code class="ruby">        result = [name, final_subject, section_number, time, mandatory_value]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="197">
            <span class="hits">1</span>
            

            

            <code class="ruby">        @final_result.append(result)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="198">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="199">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="200">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="201">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="202">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def select_time</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="203">
            <span class="hits">5</span>
            

            

            <code class="ruby">    @cohort = Cohort.find(params[:cohort_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="204">
            <span class="hits">5</span>
            

            

            <code class="ruby">    @time_selected = TimeSlot.find(params[:result_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="205">
            <span class="hits">5</span>
            

            

            <code class="ruby">    @cohort.chosen_time = @time_selected.id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="206">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="207">
            <span class="hits">5</span>
            

            

            <code class="ruby">    chosen_day = @time_selected.day</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="208">
            <span class="hits">5</span>
            

            

            <code class="ruby">    chosen_time_start = @time_selected.time</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="209">
            <span class="hits">5</span>
            

            

            <code class="ruby">    chosen_time_end = chosen_time_start.advance(:hours =&gt; 2)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="210">
            <span class="hits">5</span>
            

            

            <code class="ruby">    date_dict = { &quot;M&quot; =&gt; &quot;Monday&quot;, &quot;T&quot; =&gt; &quot;Tuesday&quot;, &quot;W&quot; =&gt; &quot;Wednesday&quot;, &quot;TR&quot; =&gt; &quot;Thursday&quot;, &quot;F&quot; =&gt; &quot;Friday&quot;}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="211">
            <span class="hits">5</span>
            

            

            <code class="ruby">    time_display = chosen_time_start.time.strftime(&quot;%H:%M&quot;) + &quot; - &quot; + chosen_time_end.strftime(&quot;%H:%M&quot;) + &quot; &quot; + date_dict[chosen_day]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="212">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="213">
            <span class="hits">5</span>
            

            

            <code class="ruby">    @cohort.save</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="214">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="215">
            <span class="hits">5</span>
            

            

            <code class="ruby">    flash[:notice] = &quot;The time slot for this cohort had been updated to &quot; + time_display</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="216">
            <span class="hits">5</span>
            

            

            <code class="ruby">    redirect_to view_cohort_semester_path(params[:cohort_id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="217">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="218">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="219">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def student_actions</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="220">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @actions = StudentAction.all.order(created_at: :desc)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="221">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="222">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="223">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="60a1d4980bb8786e9064b44adcf0808cf72f60e0">
  <div class="header">
    <h3>app/controllers/application_controller.rb</h3>
    <h4>
      <span class="green">
  92.31%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>13</b> relevant lines.
      <span class="green"><b>12</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class ApplicationController &lt; ActionController::Base</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  protect_from_forgery with: :exception</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  helper_method :current_user, :logged_in?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def current_user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2008" data-linenumber="7">
            <span class="hits">2008</span>
            

            

            <code class="ruby">      @current_user ||= User.find(session[:user_id]) if session[:user_id] </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="10">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def require_user</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="11">
            
            

            

            <code class="ruby">      redirect_to &#39;/login&#39; unless current_user </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="14">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def require_student </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="210" data-linenumber="15">
            <span class="hits">210</span>
            

            

            <code class="ruby">  		redirect_to &#39;/&#39; unless current_user and current_user.student? </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="18">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def require_admin </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="239" data-linenumber="19">
            <span class="hits">239</span>
            

            

            <code class="ruby">  		redirect_to &#39;/&#39; unless current_user and current_user.admin? </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="21">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def logged_in?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="715" data-linenumber="22">
            <span class="hits">715</span>
            

            

            <code class="ruby">      !current_user.nil?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="d642c2668f104a10b5b0ae68a7092aa0cb0e6690">
  <div class="header">
    <h3>app/controllers/concerns/scheduler_2.rb</h3>
    <h4>
      <span class="green">
  96.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>75</b> relevant lines.
      <span class="green"><b>72</b> lines covered</span> and
      <span class="red"><b>3</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Scheduler_2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @days = [&quot;M&quot;,&quot;T&quot;,&quot;W&quot;,&quot;TR&quot;,&quot;F&quot;]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def self.is_conflict?(day,current_time,schedule)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="5">
            <span class="hits">1680</span>
            

            

            <code class="ruby">        schedule.courses.each do |course|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="6">
            <span class="hits">1680</span>
            

            

            <code class="ruby">            if course.meeting_days.present? and course.meeting_days.include? day</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="240" data-linenumber="7">
            <span class="hits">240</span>
            

            

            <code class="ruby">                if course.meetingtime_start.in_time_zone(-5).strftime(&quot;%H%M&quot;) &lt;= current_time.strftime(&quot;%H%M&quot;) and current_time.strftime(&quot;%H%M&quot;) &lt;= course.meetingtime_end.in_time_zone(-5).strftime(&quot;%H%M&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="60" data-linenumber="8">
            <span class="hits">60</span>
            

            

            <code class="ruby">                    return course</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="180" data-linenumber="9">
            <span class="hits">180</span>
            

            

            <code class="ruby">                elsif course.meetingtime_start.in_time_zone(-5).strftime(&quot;%H%M&quot;) &lt;= current_time.advance(:hours =&gt; 2).strftime(&quot;%H%M&quot;) and current_time.advance(:hours =&gt; 2).strftime(&quot;%H%M&quot;) &lt;= course.meetingtime_end.in_time_zone(-5).strftime(&quot;%H%M&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="40" data-linenumber="10">
            <span class="hits">40</span>
            

            

            <code class="ruby">                    return course</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby">                else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="140" data-linenumber="12">
            <span class="hits">140</span>
            

            

            <code class="ruby">                    return false</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">                end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">            else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1440" data-linenumber="15">
            <span class="hits">1440</span>
            

            

            <code class="ruby">                return false</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">            end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">            </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="21">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def self.exponential_cost_function(current_time, start_of_day, end_of_day)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby">        </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="23">
            <span class="hits">1680</span>
            

            

            <code class="ruby">        def self.sigmoid_cost_fuc(max_cost, alpha, beta, x)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="665" data-linenumber="24">
            <span class="hits">665</span>
            

            

            <code class="ruby">            return cost = max_cost / (1+Math::exp(-1*(alpha*max_cost*x) + (beta*max_cost)))</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="26">
            <span class="hits">1680</span>
            

            

            <code class="ruby">        max_cost = 100</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="27">
            <span class="hits">1680</span>
            

            

            <code class="ruby">        prior_alpha = -0.015</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="28">
            <span class="hits">1680</span>
            

            

            <code class="ruby">        prior_beta = 0.025</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="29">
            <span class="hits">1680</span>
            

            

            <code class="ruby">        later_alpha = 0.015</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="30">
            <span class="hits">1680</span>
            

            

            <code class="ruby">        later_beta = 0.06</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">        # https://www.desmos.com/calculator</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby">        </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="33">
            <span class="hits">1680</span>
            

            

            <code class="ruby">        if current_time &lt; start_of_day</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby">            # cost = max_cost - 1</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="35">
            
            

            

            <code class="ruby">            x = (current_time.to_f - start_of_day.to_f)/900</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="36">
            
            

            

            <code class="ruby">            cost = self.sigmoid_cost_fuc(max_cost, prior_alpha, prior_beta, x)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="37">
            <span class="hits">1680</span>
            

            

            <code class="ruby">        elsif current_time &gt; end_of_day</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="665" data-linenumber="38">
            <span class="hits">665</span>
            

            

            <code class="ruby">            x = (current_time.to_f - end_of_day.to_f)/900</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="665" data-linenumber="39">
            <span class="hits">665</span>
            

            

            <code class="ruby">            cost = self.sigmoid_cost_fuc(max_cost, later_alpha, later_beta, x)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby">        else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1015" data-linenumber="41">
            <span class="hits">1015</span>
            

            

            <code class="ruby">            cost = 0</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="43">
            <span class="hits">1680</span>
            

            

            <code class="ruby">        return cost</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="47">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def self.Generate_time_slots(cohort)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            
            

            

            <code class="ruby">        </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="49">
            <span class="hits">7</span>
            

            

            <code class="ruby">        TimeSlot.where(:cohort_id =&gt; cohort.id).destroy_all</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="50">
            <span class="hits">7</span>
            

            

            <code class="ruby">        cohort.chosen_time = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="51">
            <span class="hits">7</span>
            

            

            <code class="ruby">        conflict_mods = Array.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="52">
            <span class="hits">7</span>
            

            

            <code class="ruby">        time_preferences = Array.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="53">
            <span class="hits">7</span>
            

            

            <code class="ruby">        time_slots = Array.new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="54">
            
            

            

            <code class="ruby">        </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="55">
            
            

            

            <code class="ruby">        #start_time_timing = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="56">
            <span class="hits">7</span>
            

            

            <code class="ruby">        @days.each do |day|</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            
            

            

            <code class="ruby">            #soft time preference</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35" data-linenumber="58">
            <span class="hits">35</span>
            

            

            <code class="ruby">            prior_of_day = Time.new(2020,12,9,8,0,0)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35" data-linenumber="59">
            <span class="hits">35</span>
            

            

            <code class="ruby">            later_of_day = Time.new(2020,12,9,20,0,0)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35" data-linenumber="60">
            <span class="hits">35</span>
            

            

            <code class="ruby">            current_time = prior_of_day</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="61">
            
            

            

            <code class="ruby">            </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="62">
            
            

            

            <code class="ruby">            #hard time preference</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35" data-linenumber="63">
            <span class="hits">35</span>
            

            

            <code class="ruby">            start_of_day =  Time.new(2020,12,9,8,0,0)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35" data-linenumber="64">
            <span class="hits">35</span>
            

            

            <code class="ruby">            end_of_day =    Time.new(2020,12,9,15,0,0)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="65">
            
            

            

            <code class="ruby">            </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="66">
            
            

            

            <code class="ruby">            </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35" data-linenumber="67">
            <span class="hits">35</span>
            

            

            <code class="ruby">            while current_time &lt; later_of_day</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="68">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                @time_slot = TimeSlot.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="69">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                @time_slot.time = current_time</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="70">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                @total_cost = 0</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="71">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                @conflict = false</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="72">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                @true_conflict = false</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="73">
            
            

            

            <code class="ruby">                </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="74">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                cohort.users.each do |student|</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="75">
            
            

            

            <code class="ruby">                    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="76">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                    student.schedules.each_with_index do |schedule, index|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="77">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                        @conflict = self.is_conflict?(day,current_time,schedule)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="78">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                            if @conflict.is_a? false.class</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1580" data-linenumber="79">
            <span class="hits">1580</span>
            

            

            <code class="ruby">                                break</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="80">
            <span class="hits">100</span>
            

            

            <code class="ruby">                            elsif @conflict.kind_of?(Array) &amp;&amp; @conflict.length == 0</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="81">
            
            

            

            <code class="ruby">                                next</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="82">
            
            

            

            <code class="ruby">                            else</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="83">
            
            

            

            <code class="ruby">                                #print(@conflict)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="84">
            
            

            

            <code class="ruby">                                #start_time = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="85">
            <span class="hits">100</span>
            

            

            <code class="ruby">                                @conflict_mod = Conflict.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="86">
            <span class="hits">100</span>
            

            

            <code class="ruby">                                @conflict_mod.user = student</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="87">
            <span class="hits">100</span>
            

            

            <code class="ruby">                                @conflict_mod.cost = ScheduleToCourse.find_by(:course_id  =&gt;  @conflict.id, :schedule_id =&gt; schedule.id).mandatory ? 2**index + 4 : 2 ** index #  schedule.schedule_to_courses.find_by(course_id: @conflict.id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="88">
            <span class="hits">100</span>
            

            

            <code class="ruby">                                @conflict_mod.course = @conflict</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="89">
            <span class="hits">100</span>
            

            

            <code class="ruby">                                @conflict_mod.schedule = schedule</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="90">
            <span class="hits">100</span>
            

            

            <code class="ruby">                                conflict_mods.append(@conflict_mod)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="91">
            
            

            

            <code class="ruby">                                #@conflict_mod.save</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="92">
            <span class="hits">100</span>
            

            

            <code class="ruby">                                @total_cost += @conflict_mod.cost</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="93">
            <span class="hits">100</span>
            

            

            <code class="ruby">                                @time_slot.conflicts.push(@conflict_mod)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="94">
            
            

            

            <code class="ruby">                                #end_time = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="95">
            
            

            

            <code class="ruby">                                #puts &quot;Time Elasped for conflict #{(end_time-start_time)*1000} milliseconds&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="96">
            
            

            

            <code class="ruby">                            end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="97">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="98">
            
            

            

            <code class="ruby">                    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="99">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                    if not @conflict.is_a? false.class or @true_conflict == true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="100">
            <span class="hits">100</span>
            

            

            <code class="ruby">                        @true_conflict = true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="101">
            
            

            

            <code class="ruby">                    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="102">
            
            

            

            <code class="ruby">                    </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="103">
            
            

            

            <code class="ruby">                end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="104">
            
            

            

            <code class="ruby">                </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="105">
            
            

            

            <code class="ruby">                </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="106">
            
            

            

            <code class="ruby">                #start_time = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="107">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                @time_preference_cost = self.exponential_cost_function(current_time, start_of_day, end_of_day)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="108">
            
            

            

            <code class="ruby">                # @time_preference_mod = Conflict.new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="109">
            
            

            

            <code class="ruby">                # @time_preference_mod.cost = @time_preference_cost</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="110">
            
            

            

            <code class="ruby">                # #start_time_save = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="111">
            
            

            

            <code class="ruby">                # time_preferences.append(@time_preference_mod)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="112">
            
            

            

            <code class="ruby">                # #end_time_save = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="113">
            
            

            

            <code class="ruby">                # #end_time = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="114">
            
            

            

            <code class="ruby">                # #puts &quot;Time Elasped for time_preference #{(end_time-start_time)*1000} milliseconds saving took #{(end_time_save-start_time_save) *1000}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="115">
            
            

            

            <code class="ruby">                # #print(current_time)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="116">
            
            

            

            <code class="ruby">                # #print(&quot;Time cost &quot;, @time_preference_mod.cost,&quot;\n&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="117">
            
            

            

            <code class="ruby">                # @time_slot.conflicts.push(@time_preference_mod)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="118">
            
            

            

            <code class="ruby">                </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="119">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                @time_slot.cost = @total_cost + @time_preference_cost #@time_preference_mod.cost</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="120">
            
            

            

            <code class="ruby">                </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="121">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                if not @true_conflict</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1580" data-linenumber="122">
            <span class="hits">1580</span>
            

            

            <code class="ruby">                    @time_slot.was_conflict = false</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="123">
            
            

            

            <code class="ruby">                else</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="124">
            
            

            

            <code class="ruby">                    #print(&quot;Set Conflict&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="100" data-linenumber="125">
            <span class="hits">100</span>
            

            

            <code class="ruby">                    @time_slot.was_conflict = true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="126">
            
            

            

            <code class="ruby">                end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="127">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                @time_slot.day = day</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="128">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                time_slots.append(@time_slot)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="129">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                cohort.time_slots.push(@time_slot)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1680" data-linenumber="130">
            <span class="hits">1680</span>
            

            

            <code class="ruby">                current_time += 60*15</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="131">
            
            

            

            <code class="ruby">                </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="132">
            
            

            

            <code class="ruby">            end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="133">
            
            

            

            <code class="ruby">            </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="134">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="135">
            <span class="hits">7</span>
            

            

            <code class="ruby">        conflict_mods.each(&amp;:save!)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="136">
            <span class="hits">7</span>
            

            

            <code class="ruby">        time_preferences.each(&amp;:save!)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="137">
            <span class="hits">7</span>
            

            

            <code class="ruby">        time_slots.each(&amp;:save!)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="138">
            <span class="hits">7</span>
            

            

            <code class="ruby">        cohort.save</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="139">
            
            

            

            <code class="ruby">        #end_time_timing = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="140">
            
            

            

            <code class="ruby">        #puts &quot;Time Elasped to run algorithm #{(end_time_timing-start_time_timing)*1000} milliseconds&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="141">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="142">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="143">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="f466b1ed1ab2efb68b31fb6289940c39348a4c7a">
  <div class="header">
    <h3>app/controllers/password_resets_controller.rb</h3>
    <h4>
      <span class="yellow">
  85.71%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>28</b> relevant lines.
      <span class="green"><b>24</b> lines covered</span> and
      <span class="red"><b>4</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class PasswordResetsController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  before_action :get_user,   only: [:edit, :update]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  before_action :valid_user, only: [:edit, :update]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def create</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="8">
            <span class="hits">4</span>
            

            

            <code class="ruby">    @user = User.find_by_email(params[:email])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="9">
            <span class="hits">4</span>
            

            

            <code class="ruby">    if @user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="10">
            <span class="hits">3</span>
            

            

            <code class="ruby">      if @user.activate == false</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="11">
            <span class="hits">1</span>
            

            

            <code class="ruby">        flash[:login_errors] = [&#39;You should claim your account first&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="12">
            <span class="hits">1</span>
            

            

            <code class="ruby">        redirect_to &#39;/&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="14">
            <span class="hits">2</span>
            

            

            <code class="ruby">        @user.send_password_reset</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="15">
            <span class="hits">2</span>
            

            

            <code class="ruby">        redirect_to &#39;/&#39;, notice: &#39;Email sent with password reset instructions&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="18">
            <span class="hits">1</span>
            

            

            <code class="ruby">      flash[:warning] = &#39;Email is not registered&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="19">
            <span class="hits">1</span>
            

            

            <code class="ruby">      render :new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="23">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def edit</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="26">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="27">
            
            

            

            <code class="ruby">  if @user.update_attributes(user_params)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="28">
            
            

            

            <code class="ruby">      redirect_to &#39;/&#39;, :notice =&gt; &quot;Password has been reset!&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="30">
            
            

            

            <code class="ruby">      render :edit</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="34">
            <span class="hits">1</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="35">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def get_user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="36">
            <span class="hits">2</span>
            

            

            <code class="ruby">      @user = User.find_by_password_reset_token(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="39">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def valid_user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="40">
            <span class="hits">2</span>
            

            

            <code class="ruby">      unless @user and @user.password_reset_sent_at &gt;= 2.hours.ago</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="41">
            <span class="hits">1</span>
            

            

            <code class="ruby">        flash[:warning] = &quot;Password reset has expired.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="42">
            <span class="hits">1</span>
            

            

            <code class="ruby">        redirect_to new_password_reset_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            
            

            

            <code class="ruby">        # redirect_to &#39;/&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="47">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def user_params</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="48">
            
            

            

            <code class="ruby">      params.require(:user).permit(:password, :password_confirmation)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="50">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="2ec1a4ee20e2ce35325e770796181d7e2e22811c">
  <div class="header">
    <h3>app/controllers/sessions_controller.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>27</b> relevant lines.
      <span class="green"><b>27</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class SessionsController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def new </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="145" data-linenumber="3">
            <span class="hits">145</span>
            

            

            <code class="ruby">      if logged_in?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="4">
            <span class="hits">6</span>
            

            

            <code class="ruby">        @user = current_user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="5">
            <span class="hits">6</span>
            

            

            <code class="ruby">        create</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="9">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def create</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="95" data-linenumber="10">
            <span class="hits">95</span>
            

            

            <code class="ruby">      if logged_in?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="11">
            <span class="hits">6</span>
            

            

            <code class="ruby">        @user = current_user</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="89" data-linenumber="13">
            <span class="hits">89</span>
            

            

            <code class="ruby">        @user = User.find_by_email(params[:session][:email].downcase)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="89" data-linenumber="14">
            <span class="hits">89</span>
            

            

            <code class="ruby">        if @user.nil? || (@user &amp;&amp; !@user.authenticate(params[:session][:password]))</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="15">
            <span class="hits">2</span>
            

            

            <code class="ruby">          flash[:login_errors] = [&#39;Email or password is invalid&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="16">
            <span class="hits">2</span>
            

            

            <code class="ruby">          redirect_to &#39;/&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="17">
            <span class="hits">2</span>
            

            

            <code class="ruby">          return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="93" data-linenumber="20">
            <span class="hits">93</span>
            

            

            <code class="ruby">      if @user.activate == false</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="21">
            <span class="hits">1</span>
            

            

            <code class="ruby">        flash[:login_errors] = [&#39;You should claim your account first&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="22">
            <span class="hits">1</span>
            

            

            <code class="ruby">        redirect_to &#39;/&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="23">
            <span class="hits">1</span>
            

            

            <code class="ruby">        return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="92" data-linenumber="25">
            <span class="hits">92</span>
            

            

            <code class="ruby">      flash[:notice] = &#39;Logged in!&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="92" data-linenumber="26">
            <span class="hits">92</span>
            

            

            <code class="ruby">      session[:user_id] = @user.id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="92" data-linenumber="27">
            <span class="hits">92</span>
            

            

            <code class="ruby">      @term = Term.find_by active: 1</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="92" data-linenumber="28">
            <span class="hits">92</span>
            

            

            <code class="ruby">      Term.ImportTermList! if @term.nil?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="92" data-linenumber="29">
            <span class="hits">92</span>
            

            

            <code class="ruby">      if current_user.admin?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="60" data-linenumber="30">
            <span class="hits">60</span>
            

            

            <code class="ruby">        redirect_to view_term_admin_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="32" data-linenumber="32">
            <span class="hits">32</span>
            

            

            <code class="ruby">        redirect_to &#39;/student/view_terms&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="36">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def destroy </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="33" data-linenumber="37">
            <span class="hits">33</span>
            

            

            <code class="ruby">      session[:user_id] = nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="33" data-linenumber="38">
            <span class="hits">33</span>
            

            

            <code class="ruby">      redirect_to &#39;/login&#39;, :notice =&gt; &quot;Logged out!&quot; </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="2e1df349878103c723bb2d9cc44ed915f5f3bf5b">
  <div class="header">
    <h3>app/controllers/student_controller.rb</h3>
    <h4>
      <span class="green">
  95.33%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>150</b> relevant lines.
      <span class="green"><b>143</b> lines covered</span> and
      <span class="red"><b>7</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class StudentController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">   before_action :require_student, only: [:view_terms, :add_schedule, :update_courses, :update_sections, :create_schedule, :view_schedule, :delete_schedule, :edit_schedule]  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def in_open_term?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="51" data-linenumber="6">
            <span class="hits">51</span>
            

            

            <code class="ruby">    cohort = Cohort.find(@user.cohort_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="51" data-linenumber="7">
            <span class="hits">51</span>
            

            

            <code class="ruby">    if !@term.opendate</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="8">
            
            

            

            <code class="ruby">      return false</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="51" data-linenumber="10">
            <span class="hits">51</span>
            

            

            <code class="ruby">    return DateTime.current &gt;= @term.opendate &amp;&amp; DateTime.current &lt; @term.closedate &amp;&amp; cohort.term_id == @term.id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="13">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def view_terms</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="51" data-linenumber="14">
            <span class="hits">51</span>
            

            

            <code class="ruby">    id = session[:user_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="51" data-linenumber="15">
            <span class="hits">51</span>
            

            

            <code class="ruby">    @user = User.find(id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="51" data-linenumber="16">
            <span class="hits">51</span>
            

            

            <code class="ruby">    @term = Term.find_by active: 1;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="51" data-linenumber="17">
            <span class="hits">51</span>
            

            

            <code class="ruby">    @cohort = Cohort.find(@user.cohort_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="51" data-linenumber="18">
            <span class="hits">51</span>
            

            

            <code class="ruby">    date_dict = { &quot;M&quot; =&gt; &quot;Monday&quot;, &quot;T&quot; =&gt; &quot;Tuesday&quot;, &quot;W&quot; =&gt; &quot;Wednesday&quot;, &quot;TR&quot; =&gt; &quot;Thursday&quot;, &quot;F&quot; =&gt; &quot;Friday&quot;}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="51" data-linenumber="19">
            <span class="hits">51</span>
            

            

            <code class="ruby">    if @cohort.chosen_time.present?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="20">
            <span class="hits">4</span>
            

            

            <code class="ruby">      chosen_timeslot = TimeSlot.find(@cohort.chosen_time)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="21">
            <span class="hits">4</span>
            

            

            <code class="ruby">      chosen_time_start = chosen_timeslot.time</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="22">
            <span class="hits">4</span>
            

            

            <code class="ruby">      chosen_time_end = chosen_time_start.advance(:hours =&gt; 2)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="23">
            <span class="hits">4</span>
            

            

            <code class="ruby">      @chosen_time = chosen_time_start.strftime(&quot;%H:%M&quot;) + &quot; - &quot; + chosen_time_end.strftime(&quot;%H:%M&quot;) + &quot; &quot; + date_dict[chosen_timeslot.day]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="51" data-linenumber="26">
            <span class="hits">51</span>
            

            

            <code class="ruby">    if not in_open_term?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="27">
            <span class="hits">9</span>
            

            

            <code class="ruby">      redirect_to closed_path and return</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="29">
            <span class="hits">42</span>
            

            

            <code class="ruby">    if @user.schedules</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="30">
            <span class="hits">42</span>
            

            

            <code class="ruby">      @schedules = @user.schedules</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="32">
            
            

            

            <code class="ruby">      @schedules = []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="36">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update_cohort_flag(cohort_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="37">
            <span class="hits">17</span>
            

            

            <code class="ruby">    @cohort = Cohort.find(cohort_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="17" data-linenumber="38">
            <span class="hits">17</span>
            

            

            <code class="ruby">    if @cohort.chosen_time.present? and @cohort.flag == 0</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="39">
            <span class="hits">2</span>
            

            

            <code class="ruby">      @cohort.flag = 1</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="40">
            <span class="hits">2</span>
            

            

            <code class="ruby">      @cohort.save</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="44">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def add_schedule</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="45">
            <span class="hits">19</span>
            

            

            <code class="ruby">    id = session[:user_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="46">
            <span class="hits">19</span>
            

            

            <code class="ruby">    @user = User.find(id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="48">
            <span class="hits">19</span>
            

            

            <code class="ruby">    if @user.schedules.length == 3</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="49">
            <span class="hits">1</span>
            

            

            <code class="ruby">      flash[:warning] = &quot;You may only add 3 schedules.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="50">
            <span class="hits">1</span>
            

            

            <code class="ruby">      redirect_to view_terms_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="52">
            <span class="hits">19</span>
            

            

            <code class="ruby">    @schedule = Schedule.new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="53">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="54">
            <span class="hits">19</span>
            

            

            <code class="ruby">    @term = Term.find_by active: 1;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="55">
            <span class="hits">19</span>
            

            

            <code class="ruby">    @subjects = @term.subjects</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="56">
            <span class="hits">19</span>
            

            

            <code class="ruby">    @subjects = @subjects.uniq</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="57">
            <span class="hits">19</span>
            

            

            <code class="ruby">    @course_options = [];</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="19" data-linenumber="58">
            <span class="hits">19</span>
            

            

            <code class="ruby">    @section_options = [];</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="59">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="60">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="61">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="62">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update_courses</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61" data-linenumber="63">
            <span class="hits">61</span>
            

            

            <code class="ruby">    @select_id = params[:id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61" data-linenumber="64">
            <span class="hits">61</span>
            

            

            <code class="ruby">    @course_options = [&#39;&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61" data-linenumber="65">
            <span class="hits">61</span>
            

            

            <code class="ruby">    @section_options = [&#39;&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="66">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61" data-linenumber="67">
            <span class="hits">61</span>
            

            

            <code class="ruby">    return unless params[:dept_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61" data-linenumber="68">
            <span class="hits">61</span>
            

            

            <code class="ruby">    subj = Subject.find(params[:dept_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61" data-linenumber="69">
            <span class="hits">61</span>
            

            

            <code class="ruby">    @term = Term.find_by active: 1</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61" data-linenumber="70">
            <span class="hits">61</span>
            

            

            <code class="ruby">    @courses = Course.where(abbreviated_subject: subj.subject_code,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="71">
            
            

            

            <code class="ruby">                            term_id: @term.id).order(course_number: :asc)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61" data-linenumber="72">
            <span class="hits">61</span>
            

            

            <code class="ruby">    @courses.each do |c|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="244" data-linenumber="73">
            <span class="hits">244</span>
            

            

            <code class="ruby">      @course_options.push(c.course_number)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="74">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61" data-linenumber="75">
            <span class="hits">61</span>
            

            

            <code class="ruby">    @course_options = @course_options.uniq</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="76">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="61" data-linenumber="77">
            <span class="hits">61</span>
            

            

            <code class="ruby">    return unless params[:schedule_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="78">
            <span class="hits">6</span>
            

            

            <code class="ruby">    schedule = Schedule.find(params[:schedule_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="79">
            <span class="hits">6</span>
            

            

            <code class="ruby">    schedule_courses = schedule.courses.order(abbreviated_subject: :asc, course_number: :asc)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="80">
            <span class="hits">6</span>
            

            

            <code class="ruby">    if schedule</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="81">
            <span class="hits">6</span>
            

            

            <code class="ruby">      @select_course = schedule_courses[@select_id.to_i - 1].course_number</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="82">
            <span class="hits">6</span>
            

            

            <code class="ruby">      @select_section = schedule_courses[@select_id.to_i - 1].section_number</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="83">
            <span class="hits">6</span>
            

            

            <code class="ruby">      @courses.each do |c|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="24" data-linenumber="84">
            <span class="hits">24</span>
            

            

            <code class="ruby">        @section_options.push(c.section_number) if c.course_number == @select_course</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="85">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="86">
            <span class="hits">6</span>
            

            

            <code class="ruby">      @section_options = @section_options.uniq</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="87">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="88">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="89">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="90">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update_sections</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="91">
            
            

            

            <code class="ruby">    # updates artists and songs based on genre selected</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="55" data-linenumber="92">
            <span class="hits">55</span>
            

            

            <code class="ruby">    subj = Subject.find(params[:dept_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="55" data-linenumber="93">
            <span class="hits">55</span>
            

            

            <code class="ruby">    @select_id = params[:id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="55" data-linenumber="94">
            <span class="hits">55</span>
            

            

            <code class="ruby">    if params[:course_num_id].empty?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="95">
            
            

            

            <code class="ruby">      @section_options = [].insert(0, &quot;&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="96">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="55" data-linenumber="97">
            <span class="hits">55</span>
            

            

            <code class="ruby">      course_num = params[:course_num_id]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="98">
            
            

            

            <code class="ruby">      # map to name and id for use in our options_for_select</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="55" data-linenumber="99">
            <span class="hits">55</span>
            

            

            <code class="ruby">      @term = Term.find_by active: 1;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="55" data-linenumber="100">
            <span class="hits">55</span>
            

            

            <code class="ruby">      @sections = Course.where(:abbreviated_subject =&gt; subj.subject_code, :course_number =&gt; course_num, :term_id =&gt; @term.id).order(section_number: :asc)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="55" data-linenumber="101">
            <span class="hits">55</span>
            

            

            <code class="ruby">      @section_options = [];</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="55" data-linenumber="102">
            <span class="hits">55</span>
            

            

            <code class="ruby">      @sections.each do |c|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="55" data-linenumber="103">
            <span class="hits">55</span>
            

            

            <code class="ruby">        @section_options.push(c.section_number)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="104">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="55" data-linenumber="105">
            <span class="hits">55</span>
            

            

            <code class="ruby">      @section_options = @section_options.uniq</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="55" data-linenumber="106">
            <span class="hits">55</span>
            

            

            <code class="ruby">      @section_options.insert(0, &quot;&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="107">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="108">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="109">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="110">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def create_schedule</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="111">
            <span class="hits">15</span>
            

            

            <code class="ruby">    id = session[:user_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="112">
            <span class="hits">15</span>
            

            

            <code class="ruby">    is_create = params[:schedule][:id].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="113">
            <span class="hits">15</span>
            

            

            <code class="ruby">    @user = User.find(id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="114">
            <span class="hits">15</span>
            

            

            <code class="ruby">    if params[:schedule][:name] == &quot;&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="115">
            
            

            

            <code class="ruby">      flash[:warning] = &#39;Schedule must include a name.&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="116">
            
            

            

            <code class="ruby">      redirect_to add_schedule_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="117">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="118">
            
            

            

            <code class="ruby">      # add courses to schedule, schedule to user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="119">
            <span class="hits">15</span>
            

            

            <code class="ruby">      @term = Term.find_by active: 1;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="120">
            <span class="hits">15</span>
            

            

            <code class="ruby">      if is_create</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="13" data-linenumber="121">
            <span class="hits">13</span>
            

            

            <code class="ruby">        @schedule = Schedule.new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="122">
            
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="123">
            <span class="hits">2</span>
            

            

            <code class="ruby">        @schedule = Schedule.find(params[:schedule][:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="124">
            <span class="hits">2</span>
            

            

            <code class="ruby">        @schedule.courses.clear</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="125">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="126">
            <span class="hits">15</span>
            

            

            <code class="ruby">      @schedule.update_attributes(:name =&gt; params[:schedule][:name])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="127">
            <span class="hits">15</span>
            

            

            <code class="ruby">      @user.schedules.push(@schedule)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="128">
            <span class="hits">15</span>
            

            

            <code class="ruby">      warning_word = &quot;&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="129">
            <span class="hits">15</span>
            

            

            <code class="ruby">      7.times do |n|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="105" data-linenumber="130">
            <span class="hits">105</span>
            

            

            <code class="ruby">        subj_symb = &quot;dept_id_#{n+1}&quot;.to_sym</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="105" data-linenumber="131">
            <span class="hits">105</span>
            

            

            <code class="ruby">        number_symb = &quot;course_num_id_#{n+1}&quot;.to_sym</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="105" data-linenumber="132">
            <span class="hits">105</span>
            

            

            <code class="ruby">        section_symb = &quot;section_num_id_#{n+1}&quot;.to_sym</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="105" data-linenumber="133">
            <span class="hits">105</span>
            

            

            <code class="ruby">        check_symb = &quot;mand_#{n+1}&quot;.to_sym</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="134">
            
            

            

            <code class="ruby">        </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="105" data-linenumber="135">
            <span class="hits">105</span>
            

            

            <code class="ruby">        if (params[subj_symb] != &quot;&quot; and params[number_symb] == &quot;&quot;) or (params[subj_symb] != &quot;&quot; and params[section_symb] == &quot;&quot;)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="136">
            
            

            

            <code class="ruby">          warning_word = &quot; Courses without course number or section number will not be added in the schedule!&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="137">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="105" data-linenumber="138">
            <span class="hits">105</span>
            

            

            <code class="ruby">        next if params[subj_symb].empty? or params[number_symb].empty? or params[section_symb].empty?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="46" data-linenumber="139">
            <span class="hits">46</span>
            

            

            <code class="ruby">        subj = Subject.find(params[subj_symb]).subject_code</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="46" data-linenumber="140">
            <span class="hits">46</span>
            

            

            <code class="ruby">        @course = Course.find_by(abbreviated_subject: subj, course_number: params[number_symb],</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="141">
            
            

            

            <code class="ruby">                                 section_number: params[section_symb], term_id: @term.id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="142">
            
            

            

            <code class="ruby">        # prevent duplicate courses in the same schedule</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="46" data-linenumber="143">
            <span class="hits">46</span>
            

            

            <code class="ruby">        next unless @schedule.courses.find_by(id: @course.id).nil?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="46" data-linenumber="144">
            <span class="hits">46</span>
            

            

            <code class="ruby">        @schedule.courses.push(@course)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="46" data-linenumber="145">
            <span class="hits">46</span>
            

            

            <code class="ruby">        next if params[check_symb].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="27" data-linenumber="146">
            <span class="hits">27</span>
            

            

            <code class="ruby">        @schedule_course = ScheduleToCourse.find_by(course_id: @course.id, schedule: @schedule.id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="27" data-linenumber="147">
            <span class="hits">27</span>
            

            

            <code class="ruby">        @schedule_course.update_attributes(:mandatory =&gt; true)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="148">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="149">
            <span class="hits">15</span>
            

            

            <code class="ruby">      action = StudentAction.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="150">
            <span class="hits">15</span>
            

            

            <code class="ruby">      action.user_id = @user.id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="151">
            <span class="hits">15</span>
            

            

            <code class="ruby">      action.schedule_name = @schedule.name</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="152">
            <span class="hits">15</span>
            

            

            <code class="ruby">      action.schedule_id = @schedule.id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="153">
            <span class="hits">15</span>
            

            

            <code class="ruby">      action.action = is_create ? 0 : 2</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="154">
            <span class="hits">15</span>
            

            

            <code class="ruby">      action.save</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="155">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="156">
            <span class="hits">15</span>
            

            

            <code class="ruby">      flash[:notice] = (is_create ? &#39;Schedule added!&#39; : &#39;Schedule updated!&#39;) + warning_word</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="157">
            <span class="hits">15</span>
            

            

            <code class="ruby">      user = User.find(session[:user_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="158">
            <span class="hits">15</span>
            

            

            <code class="ruby">      update_cohort_flag(user.cohort_id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="159">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="15" data-linenumber="160">
            <span class="hits">15</span>
            

            

            <code class="ruby">      redirect_to view_terms_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="161">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="162">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="163">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="164">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def view_schedule</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="165">
            <span class="hits">5</span>
            

            

            <code class="ruby">    @schedule = Schedule.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="166">
            <span class="hits">5</span>
            

            

            <code class="ruby">    @courses = @schedule.courses.order(abbreviated_subject: :asc, course_number: :asc)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="167">
            <span class="hits">5</span>
            

            

            <code class="ruby">    @cohort = Cohort.find((User.find(session[:user_id])).cohort_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="168">
            <span class="hits">5</span>
            

            

            <code class="ruby">    @associations = ScheduleToCourse.where(:schedule_id =&gt; @schedule.id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="169">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="170">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="171">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def edit_schedule</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="172">
            <span class="hits">2</span>
            

            

            <code class="ruby">    id = session[:user_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="173">
            <span class="hits">2</span>
            

            

            <code class="ruby">    @user = User.find(id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="174">
            <span class="hits">2</span>
            

            

            <code class="ruby">    @term = Term.find_by active: 1</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="175">
            <span class="hits">2</span>
            

            

            <code class="ruby">    @subjects = @term.subjects.uniq</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="176">
            <span class="hits">2</span>
            

            

            <code class="ruby">    @course_options = []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="177">
            <span class="hits">2</span>
            

            

            <code class="ruby">    @section_options = []</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="178">
            
            

            

            <code class="ruby">    # information of current schedule to load into form</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="179">
            <span class="hits">2</span>
            

            

            <code class="ruby">    @schedule = Schedule.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="180">
            <span class="hits">2</span>
            

            

            <code class="ruby">    courses = @schedule.courses.order(abbreviated_subject: :asc, course_number: :asc)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="181">
            <span class="hits">2</span>
            

            

            <code class="ruby">    associations = ScheduleToCourse.where(schedule_id: @schedule.id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="182">
            <span class="hits">2</span>
            

            

            <code class="ruby">    @cur_subject = []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="183">
            <span class="hits">2</span>
            

            

            <code class="ruby">    @cur_mand = []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="184">
            <span class="hits">2</span>
            

            

            <code class="ruby">    courses.each do |course|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="185">
            <span class="hits">6</span>
            

            

            <code class="ruby">      @cur_mand.push((associations.find_by course_id: course.id).mandatory == true)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="33" data-linenumber="186">
            <span class="hits">33</span>
            

            

            <code class="ruby">      @cur_subject.push((@subjects.index { |item| item.subject_code == course.subject.subject_code } || -1) + 1)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="187">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="188">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="189">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="190">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def schedule_params</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="191">
            
            

            

            <code class="ruby">    params.require(:schedule).permit(:name, course_ids: [])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="192">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="193">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="194">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def delete_schedule</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="195">
            <span class="hits">2</span>
            

            

            <code class="ruby">    schedule = Schedule.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="196">
            <span class="hits">2</span>
            

            

            <code class="ruby">    schedule.destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="197">
            <span class="hits">2</span>
            

            

            <code class="ruby">    user = User.find(session[:user_id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="198">
            <span class="hits">2</span>
            

            

            <code class="ruby">    update_cohort_flag(user.cohort_id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="199">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="200">
            <span class="hits">2</span>
            

            

            <code class="ruby">    action = StudentAction.new()</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="201">
            <span class="hits">2</span>
            

            

            <code class="ruby">    action.user_id = session[:user_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="202">
            <span class="hits">2</span>
            

            

            <code class="ruby">    action.schedule_name = schedule.name</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="203">
            <span class="hits">2</span>
            

            

            <code class="ruby">    action.action = 1</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="204">
            <span class="hits">2</span>
            

            

            <code class="ruby">    action.save()</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="205">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="206">
            <span class="hits">2</span>
            

            

            <code class="ruby">    flash[:notice] = &#39;Schedule deleted!&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="207">
            <span class="hits">2</span>
            

            

            <code class="ruby">    redirect_to view_terms_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="208">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="209">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="210">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def closed</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="211">
            <span class="hits">9</span>
            

            

            <code class="ruby">    id = session[:user_id]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="212">
            <span class="hits">9</span>
            

            

            <code class="ruby">    @user = User.find(id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="213">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="214">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="2c84daa5251fa2a4d61ddba5f93e48f9688cb58a">
  <div class="header">
    <h3>app/controllers/users_controller.rb</h3>
    <h4>
      <span class="red">
  64.58%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>96</b> relevant lines.
      <span class="green"><b>62</b> lines covered</span> and
      <span class="red"><b>34</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class UsersController &lt; ApplicationController</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  before_action :require_admin, only: %i[edit_user delete_user save_records import_from_excel create]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="5">
            <span class="hits">8</span>
            

            

            <code class="ruby">    @user = User.new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="8">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def add_cohort</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="9">
            
            

            

            <code class="ruby">    @cohort = Cohort.new</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="12">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def download_excel_example</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="13">
            
            

            

            <code class="ruby">    send_file &quot;#{Rails.root}/app/assets/docs/example.xlsx&quot;, x_sendfile: true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="16">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def edit_user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="17">
            <span class="hits">9</span>
            

            

            <code class="ruby">    redirect_to &#39;/&#39; unless current_user.admin?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="9" data-linenumber="18">
            <span class="hits">9</span>
            

            

            <code class="ruby">    @user = User.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="21">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def patch_user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="22">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @user = User.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="23">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @user.firstname = params[:user][:firstname]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="24">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @user.lastname = params[:user][:lastname]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="25">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @user.uin = params[:user][:uin]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="26">
            <span class="hits">6</span>
            

            

            <code class="ruby">    @user.email = params[:user][:email]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="6" data-linenumber="27">
            <span class="hits">6</span>
            

            

            <code class="ruby">    if @user.save</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="28">
            <span class="hits">5</span>
            

            

            <code class="ruby">      if @user.role == &#39;student&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="29">
            <span class="hits">4</span>
            

            

            <code class="ruby">        flash[:notice] = &quot;Student updated!&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="30">
            <span class="hits">4</span>
            

            

            <code class="ruby">        redirect_to manage_cohorts_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">      else #admin</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="32">
            <span class="hits">1</span>
            

            

            <code class="ruby">        flash[:notice] = &quot;Administrator updated!&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="33">
            <span class="hits">1</span>
            

            

            <code class="ruby">        redirect_to manage_administrators_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="36">
            <span class="hits">1</span>
            

            

            <code class="ruby">      flash[:warning] = &quot;Error&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="37">
            <span class="hits">1</span>
            

            

            <code class="ruby">      redirect_to edit_user_path(@user)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="41">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def delete_user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="42">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @user = User.find(params[:id])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="43">
            <span class="hits">1</span>
            

            

            <code class="ruby">    @user.destroy</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="45">
            <span class="hits">1</span>
            

            

            <code class="ruby">    flash[:notice] = &#39;User deleted!&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="46">
            <span class="hits">1</span>
            

            

            <code class="ruby">    redirect_to manage_cohorts_path()</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="49">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def create_temp_student(row)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="50">
            
            

            

            <code class="ruby">    user = User.new</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="51">
            
            

            

            <code class="ruby">    user.firstname = row[0]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="52">
            
            

            

            <code class="ruby">    user.lastname = row[1]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="53">
            
            

            

            <code class="ruby">    user.uin = row[2]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="54">
            
            

            

            <code class="ruby">    user.email = row[3]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="55">
            
            

            

            <code class="ruby">    user.role = &#39;student&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="56">
            
            

            

            <code class="ruby">    user.password = &#39;Temp&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="57">
            
            

            

            <code class="ruby">    user.activate = false</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="58">
            
            

            

            <code class="ruby">    return user</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="59">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="60">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="61">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def save_records(file)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="62">
            
            

            

            <code class="ruby">    file_ext = File.extname(file.original_filename)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="63">
            
            

            

            <code class="ruby">    # raise &quot;Unknown file type: #{file.original_filename}&quot; unless [&quot;.xls&quot;, &quot;.xlsx&quot;].include?(file_ext)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="64">
            
            

            

            <code class="ruby">    if [&quot;.xls&quot;, &quot;.xlsx&quot;].include?(file_ext)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="65">
            
            

            

            <code class="ruby">      @cohort = Cohort.new</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="66">
            
            

            

            <code class="ruby">      @cohort.update_attributes(:name =&gt; params[:name])</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="67">
            
            

            

            <code class="ruby">      spreadsheet = (file_ext == &quot;.xls&quot;) ? Roo::Excel.new(file.path) : Roo::Excelx.new(file.path)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="68">
            
            

            

            <code class="ruby">      header = spreadsheet.row(1)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="69">
            
            

            

            <code class="ruby">      ## We are iterating from row 2 because we have left row one for header</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="70">
            
            

            

            <code class="ruby">      error_rows = []</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="71">
            
            

            

            <code class="ruby">      (2..spreadsheet.last_row).each do |i|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="72">
            
            

            

            <code class="ruby">        @user = create_temp_student(spreadsheet.row(i))</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="73">
            
            

            

            <code class="ruby">        error_rows.append(i) unless @user.save</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="74">
            
            

            

            <code class="ruby">        @cohort.users.push(@user)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="75">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="76">
            
            

            

            <code class="ruby">      if error_rows.empty?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="77">
            
            

            

            <code class="ruby">        flash[:notice] = &quot;Records Imported&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="78">
            
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="79">
            
            

            

            <code class="ruby">        flash[:warning] = format(&#39;Records Imported, but row %s has error&#39;, error_rows)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="80">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="81">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="82">
            
            

            

            <code class="ruby">      flash[:warning] = &quot;Import Failed : &quot; + &quot;Unknown file type: #{file.original_filename}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="83">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="84">
            
            

            

            <code class="ruby">    # return record_message</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="85">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="86">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="87">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def import_from_excel</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="88">
            
            

            

            <code class="ruby">    begin</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="89">
            
            

            

            <code class="ruby">      file = params[:file]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="90">
            
            

            

            <code class="ruby">      if !file</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="91">
            
            

            

            <code class="ruby">        flash[:warning] = &quot;Import Failed : File is not chosen&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="92">
            
            

            

            <code class="ruby">      elsif params[:name].empty?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="93">
            
            

            

            <code class="ruby">        flash[:warning] = &quot;Import Failed : Cohort name is not assigned&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="94">
            
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="95">
            
            

            

            <code class="ruby">        # Retreive the extension of the file</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="96">
            
            

            

            <code class="ruby">        save_records(file)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="97">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="98">
            
            

            

            <code class="ruby">    redirect_to manage_cohorts_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="99">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="100">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="101">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="102">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def create</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="103">
            <span class="hits">8</span>
            

            

            <code class="ruby">    @user = User.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="104">
            <span class="hits">8</span>
            

            

            <code class="ruby">    @user.firstname = params[:user][:firstname]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="105">
            <span class="hits">8</span>
            

            

            <code class="ruby">    @user.lastname = params[:user][:lastname]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="106">
            <span class="hits">8</span>
            

            

            <code class="ruby">    @user.email = params[:user][:email]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="107">
            <span class="hits">8</span>
            

            

            <code class="ruby">    @user.uin = params[:user][:uin]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="108">
            <span class="hits">8</span>
            

            

            <code class="ruby">    @user.role = &#39;admin&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="109">
            <span class="hits">8</span>
            

            

            <code class="ruby">    @user.password = &quot;Temp&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="110">
            <span class="hits">8</span>
            

            

            <code class="ruby">    @user.activate = false</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="111">
            <span class="hits">8</span>
            

            

            <code class="ruby">    flash[:warning] = @user.errors.full_messages unless @user.save</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="112">
            <span class="hits">8</span>
            

            

            <code class="ruby">    redirect_to manage_administrators_path</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="113">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="114">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="115">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update_user</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="116">
            
            

            

            <code class="ruby">    # check if there is a record for them in users</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="117">
            <span class="hits">8</span>
            

            

            <code class="ruby">    @user = User.find_by(email: params[:user][:email], uin: params[:user][:uin])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8" data-linenumber="118">
            <span class="hits">8</span>
            

            

            <code class="ruby">    if @user.nil?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="119">
            <span class="hits">3</span>
            

            

            <code class="ruby">      @user = User.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="120">
            <span class="hits">3</span>
            

            

            <code class="ruby">      @user.errors.add(:email, &#39;not registered or UIN not matched&#39;)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="121">
            <span class="hits">3</span>
            

            

            <code class="ruby">      render &#39;new&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="122">
            <span class="hits">5</span>
            

            

            <code class="ruby">    elsif @user.activate?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="123">
            <span class="hits">1</span>
            

            

            <code class="ruby">      @user.errors.add(:email, &#39;is already claimed before&#39;)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="124">
            <span class="hits">1</span>
            

            

            <code class="ruby">      render &#39;new&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="125">
            
            

            

            <code class="ruby">    else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="126">
            <span class="hits">4</span>
            

            

            <code class="ruby">      @user.update_attributes(password: params[:user][:password], activate: true,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="127">
            
            

            

            <code class="ruby">                              password_confirmation: params[:user][:password_confirmation])</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="128">
            <span class="hits">4</span>
            

            

            <code class="ruby">      if @user.save</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="129">
            <span class="hits">2</span>
            

            

            <code class="ruby">        session[:user_id] = @user.id</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="130">
            <span class="hits">2</span>
            

            

            <code class="ruby">        @term = Term.find_by active: 1</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="131">
            <span class="hits">2</span>
            

            

            <code class="ruby">        term.ImportTermList! if @term.nil?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="132">
            <span class="hits">2</span>
            

            

            <code class="ruby">        if current_user.admin?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="133">
            <span class="hits">1</span>
            

            

            <code class="ruby">          redirect_to view_term_admin_path, notice: &#39;You have claimed your account&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="134">
            
            

            

            <code class="ruby">        else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="135">
            <span class="hits">1</span>
            

            

            <code class="ruby">          redirect_to &#39;/student/view_terms&#39;, notice: &#39;You have claimed your account&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="136">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="137">
            
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="138">
            <span class="hits">2</span>
            

            

            <code class="ruby">        render &#39;new&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="139">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="140">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="141">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="142">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="143">
            <span class="hits">1</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="144">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="145">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def user_params</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="146">
            
            

            

            <code class="ruby">    params.require(:user).permit(:role, :uin, :lastname, :firstname, :email, :password, :password_confirmation)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="147">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="148">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="fe7042ae957a64675df316ca38f372d8604f919f">
  <div class="header">
    <h3>app/helpers/application_helper.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>1</b> relevant lines.
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">module ApplicationHelper</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="f17f06cec2da50e09453374ae9dff70a6c8500b4">
  <div class="header">
    <h3>app/helpers/course_scraper.rb</h3>
    <h4>
      <span class="yellow">
  82.76%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>58</b> relevant lines.
      <span class="green"><b>48</b> lines covered</span> and
      <span class="red"><b>10</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;nokogiri&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;date&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;net/http&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;json&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;uri&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;logger&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="8">
            <span class="hits">1</span>
            

            

            <code class="ruby">module CourseScraper</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="10">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def self.get_terms</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="11">
            
            

            

            <code class="ruby">    s = PrivateCourseScraper.new</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="12">
            
            

            

            <code class="ruby">    response = s.do_request(&#39;https://compassxe-ssb.tamu.edu/StudentRegistrationSsb/ssb/classSearch/getTerms?searchTerm=&amp;offset=1&amp;max=20&#39;, :get)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="13">
            
            

            

            <code class="ruby">    JSON.parse(response.body)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="16">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def self.get_subjects(term_code)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="17">
            <span class="hits">7</span>
            

            

            <code class="ruby">    s = PrivateCourseScraper.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="18">
            <span class="hits">7</span>
            

            

            <code class="ruby">    s.set_term_code_cookie(term_code)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">    # After testing, the ?term query param does nothing, but just in case they change it later, we&#39;ll include it</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="20">
            <span class="hits">7</span>
            

            

            <code class="ruby">    response = s.do_request(&quot;https://compassxe-ssb.tamu.edu/StudentRegistrationSsb/ssb/classSearch/get_subject?term=#{term_code}&amp;offset=1&amp;max=9999999&quot;, :get)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="21">
            <span class="hits">7</span>
            

            

            <code class="ruby">    JSON.parse(response.body)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="24">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def self.get_courses(term_code, subject)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="25">
            <span class="hits">7</span>
            

            

            <code class="ruby">    s = PrivateCourseScraper.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="26">
            <span class="hits">7</span>
            

            

            <code class="ruby">    s.set_term_code_cookie(term_code)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="27">
            <span class="hits">7</span>
            

            

            <code class="ruby">    page_offset = 0</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="28">
            <span class="hits">7</span>
            

            

            <code class="ruby">    page_max_size = 100</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="29">
            <span class="hits">7</span>
            

            

            <code class="ruby">    courses = []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="30">
            <span class="hits">7</span>
            

            

            <code class="ruby">    response = s.do_request(&quot;https://compassxe-ssb.tamu.edu/StudentRegistrationSsb/ssb/searchResults/searchResults?txt_subject=#{subject}&amp;txt_term=#{term_code}&amp;pageOffset=#{page_offset}&amp;pageMaxSize=#{page_max_size}&quot;, :get)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="31">
            <span class="hits">7</span>
            

            

            <code class="ruby">    json_response = JSON.parse(response.body)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="32">
            <span class="hits">7</span>
            

            

            <code class="ruby">    total_count = json_response[&#39;totalCount&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="33">
            <span class="hits">7</span>
            

            

            <code class="ruby">    courses += json_response[&#39;data&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="34">
            
            

            

            <code class="ruby">    while page_offset &lt; total_count</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="35">
            
            

            

            <code class="ruby">      page_offset += page_max_size</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="36">
            
            

            

            <code class="ruby">      response = s.do_request(&quot;https://compassxe-ssb.tamu.edu/StudentRegistrationSsb/ssb/searchResults/searchResults?txt_subject=#{subject}&amp;txt_term=#{term_code}&amp;pageOffset=#{page_offset}&amp;pageMaxSize=#{page_max_size}&quot;, :get)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="37">
            
            

            

            <code class="ruby">      json_response = JSON.parse(response.body)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="38">
            
            

            

            <code class="ruby">      courses += json_response[&#39;data&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="40">
            
            

            

            <code class="ruby">    courses</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="43">
            <span class="hits">1</span>
            

            

            <code class="ruby">  class PrivateCourseScraper</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby">    METHOD_MAP = {</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="45">
            <span class="hits">1</span>
            

            

            <code class="ruby">    :get    =&gt; Net::HTTP::Get,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            
            

            

            <code class="ruby">    :post   =&gt; Net::HTTP::Post,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            
            

            

            <code class="ruby">    :put    =&gt; Net::HTTP::Put,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            
            

            

            <code class="ruby">    :delete =&gt; Net::HTTP::Delete</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            
            

            

            <code class="ruby">    }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="50">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="51">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def initialize</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14" data-linenumber="52">
            <span class="hits">14</span>
            

            

            <code class="ruby">      @cookie_map = {}</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14" data-linenumber="53">
            <span class="hits">14</span>
            

            

            <code class="ruby">      set_initial_cookie</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="54">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="55">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="56">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def set_initial_cookie</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14" data-linenumber="57">
            <span class="hits">14</span>
            

            

            <code class="ruby">      do_request(&#39;https://compassxe-ssb.tamu.edu/StudentRegistrationSsb/ssb/term/termSelection?mode=search&#39;, :get)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="59">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="60">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def set_term_code_cookie(term_code)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14" data-linenumber="61">
            <span class="hits">14</span>
            

            

            <code class="ruby">      do_request(&#39;https://compassxe-ssb.tamu.edu/StudentRegistrationSsb/ssb/term/search?mode=search&#39;, :post, {&#39;term&#39; =&gt; term_code})</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="62">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="63">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="64">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def do_request(uri_string, http_method, form_data = nil)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="65">
            <span class="hits">42</span>
            

            

            <code class="ruby">      uri = URI.parse(uri_string)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="66">
            <span class="hits">42</span>
            

            

            <code class="ruby">      http = Net::HTTP.new(uri.host, uri.port)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="67">
            <span class="hits">42</span>
            

            

            <code class="ruby">      http.use_ssl = (uri.scheme == &#39;https&#39;)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="68">
            <span class="hits">42</span>
            

            

            <code class="ruby">      request = METHOD_MAP[http_method].new(uri.request_uri)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="69">
            <span class="hits">42</span>
            

            

            <code class="ruby">      request[&#39;Cookie&#39;] = cookie_map_to_s</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="70">
            <span class="hits">42</span>
            

            

            <code class="ruby">      if form_data</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14" data-linenumber="71">
            <span class="hits">14</span>
            

            

            <code class="ruby">        request.set_form_data(form_data)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="72">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="73">
            <span class="hits">42</span>
            

            

            <code class="ruby">      response = http.request(request)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="74">
            <span class="hits">42</span>
            

            

            <code class="ruby">      if response.kind_of? Net::HTTPSuccess</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="75">
            <span class="hits">42</span>
            

            

            <code class="ruby">        add_to_cookie_map(response.get_fields(&#39;set-cookie&#39;))</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="42" data-linenumber="76">
            <span class="hits">42</span>
            

            

            <code class="ruby">        response</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="77">
            
            

            

            <code class="ruby">      else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="78">
            
            

            

            <code class="ruby">        raise StandardError, &quot;CourseScraper Web Request Failed\n\tURI #{uri_string}\n\tCode #{response.code}&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="79">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="80">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="81">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="82">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def add_to_cookie_map(cookie_strings)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="98" data-linenumber="83">
            <span class="hits">98</span>
            

            

            <code class="ruby">      cookie_strings.each{|c_string| @cookie_map[c_string.split(&#39;=&#39;)[0]] = c_string}</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="84">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="85">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="86">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def cookie_map_to_s</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="98" data-linenumber="87">
            <span class="hits">98</span>
            

            

            <code class="ruby">      @cookie_map.map{|k, v| v}.join(&#39;, &#39;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="88">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="89">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="90">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="eb3298652441930d201a5ba53aa332b3f40624bf">
  <div class="header">
    <h3>app/helpers/login_helper.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>1</b> relevant lines.
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">module LoginHelper</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="5e2ccc2a2b11077a7575c5767a6d7df11c82f557">
  <div class="header">
    <h3>app/helpers/password_resets_helper.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>1</b> relevant lines.
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">module PasswordResetsHelper</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="6deb98ecefd0309334132b3862d4862a7d457ca5">
  <div class="header">
    <h3>app/helpers/sessions_helper.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>1</b> relevant lines.
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">module SessionsHelper</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="efbc13902ba9bcb966b5f81b5e9eb3e9a81cca57">
  <div class="header">
    <h3>app/helpers/student_actions_helper.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>1</b> relevant lines.
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">module StudentActionsHelper</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="dad0decafc7df198fedf3d93d8b8168624af8037">
  <div class="header">
    <h3>app/helpers/users_helper.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>1</b> relevant lines.
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">module UsersHelper</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="b507f298571d1a2d00d58fa08c10094047f8c282">
  <div class="header">
    <h3>app/helpers/view_terms_helper.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>1</b> relevant lines.
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">module ViewTermsHelper</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="646b9607279b6ade9abdae6d530f73db8a1d1c6e">
  <div class="header">
    <h3>app/jobs/application_job.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>1</b> relevant lines.
      <span class="green"><b>1</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class ApplicationJob &lt; ActiveJob::Base</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="bc9b7fc1d98fbb43d2ee09626770f1e240a57cfb">
  <div class="header">
    <h3>app/jobs/load_courses_job.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>6</b> relevant lines.
      <span class="green"><b>6</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class LoadCoursesJob &lt; ApplicationJob</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  queue_as :default</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def perform(term)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="5">
            <span class="hits">7</span>
            

            

            <code class="ruby">    if term.courses_import_complete == false</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="6">
            <span class="hits">7</span>
            

            

            <code class="ruby">      Subject.ImportSubjectsForTerm!(term)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="7">
            <span class="hits">7</span>
            

            

            <code class="ruby">      term.import_all_courses!</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="2718ffdb03089b17618335cad37c2658e7a1ac01">
  <div class="header">
    <h3>app/mailers/application_mailer.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>3</b> relevant lines.
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class ApplicationMailer &lt; ActionMailer::Base</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">  # ToDo: setup the sender email and send verification email on send grid</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  default from: ENV[&#39;SENDGRID_SENDER&#39;] || &quot;FakeSender&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  layout &#39;mailer&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="46092d0d3320fdbff0551ed21adba7aa5716b268">
  <div class="header">
    <h3>app/mailers/user_mailer.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>4</b> relevant lines.
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class UserMailer &lt; ApplicationMailer</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def password_reset(user)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="4">
            <span class="hits">2</span>
            

            

            <code class="ruby">        @user = user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="5">
            <span class="hits">2</span>
            

            

            <code class="ruby">        mail :to =&gt; user.email, :subject =&gt; &quot;Password Reset&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby">    </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="10726e1a37673315ac6319fb50134c1b4d3598fd">
  <div class="header">
    <h3>app/models/application_record.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>2</b> relevant lines.
      <span class="green"><b>2</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class ApplicationRecord &lt; ActiveRecord::Base</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  self.abstract_class = true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="9bf74aba4dd6456ffad785772e0b777ec8af2f2b">
  <div class="header">
    <h3>app/models/cohort.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>4</b> relevant lines.
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Cohort &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">    has_many :users, dependent: :destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">    has_many :time_slots, dependent: :destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">    has_one :term</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="a4fa5fbc6a827fba5392a113c7020f009a96efd6">
  <div class="header">
    <h3>app/models/conflict.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>5</b> relevant lines.
      <span class="green"><b>5</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Conflict &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :time_slot</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :user, optional: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :course, optional: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :schedule, optional: true</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="0dc13c88c946526be117eba8fe2e79b5de965522">
  <div class="header">
    <h3>app/models/course.rb</h3>
    <h4>
      <span class="red">
  30.43%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>46</b> relevant lines.
      <span class="green"><b>14</b> lines covered</span> and
      <span class="red"><b>32</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;nokogiri&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;date&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;net/http&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;json&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;uri&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby"># Example of Course in Database</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby">  # full_subject: Accounting</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">  # abbreviated_subject: ACCT</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">  # course_name: SURVEY OF ACCT PRIN</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">  # course_number: 209</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby">  # section_number: 501</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">  # meetingtime_start: 2020-01-13 08:00:00</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">  # meetingtime_end: 2020-05-05 09:15:00</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">  # meeting_days:</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">  #   - T</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">  # instructors:</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">  #   - Morgan E. Clarke</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby">  # meeting_location: Wehner - College of Business 113</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">  # term: nil</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="20">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Course &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="21">
            <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :term</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="22">
            <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :subject</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="23">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_many :schedule_to_courses</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="24">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_many :schedules, through: :schedule_to_courses</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby">  DAY_ABBREV_MAP = {</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="27">
            <span class="hits">1</span>
            

            

            <code class="ruby">    &#39;M&#39; =&gt; &#39;monday&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby">    &#39;T&#39; =&gt; &#39;tuesday&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            
            

            

            <code class="ruby">    &#39;W&#39; =&gt; &#39;wednesday&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby">    &#39;TR&#39; =&gt; &#39;thursday&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">    &#39;F&#39; =&gt; &#39;friday&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby">    &#39;SA&#39; =&gt; &#39;saturday&#39;,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">    &#39;SU&#39; =&gt; &#39;sunday&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby">  }</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="36">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def self.ImportCourses!(term, subject)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="37">
            <span class="hits">7</span>
            

            

            <code class="ruby">    courses_json = CourseScraper.get_courses(term.term_code, subject.subject_code)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="38">
            
            

            

            <code class="ruby">    all_courses = []</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="39">
            
            

            

            <code class="ruby">    courses_json.each do |course_json|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="40">
            
            

            

            <code class="ruby">      c = Course.new</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="41">
            
            

            

            <code class="ruby">      c.full_subject = course_json[&#39;subject_description&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="42">
            
            

            

            <code class="ruby">      c.abbreviated_subject = course_json[&#39;subject&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="43">
            
            

            

            <code class="ruby">      c.course_name = course_json[&#39;courseTitle&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="44">
            
            

            

            <code class="ruby">      c.course_number = course_json[&#39;courseNumber&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="45">
            
            

            

            <code class="ruby">      c.section_number = course_json[&#39;sequenceNumber&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            
            

            

            <code class="ruby">      #There are potentially many meeting types, Lecture, Exam, Lab, etc...</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            
            

            

            <code class="ruby">      #Everyone I&#39;ve looked at thus far has been lecture first. Unsure how to</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            
            

            

            <code class="ruby">      #treat an Exam or Lab period that doesn&#39;t happen regularly.</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="49">
            
            

            

            <code class="ruby">      meetings_faculty = course_json[&#39;meetingsFaculty&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="50">
            
            

            

            <code class="ruby">      if meetings_faculty.length &gt; 0</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="51">
            
            

            

            <code class="ruby">        meeting_time = meetings_faculty[0][&#39;meetingTime&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="52">
            
            

            

            <code class="ruby">        start_time = meeting_time[&#39;beginTime&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="53">
            
            

            

            <code class="ruby">        end_time = meeting_time[&#39;endTime&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="54">
            
            

            

            <code class="ruby">        start_date = meeting_time[&#39;startDate&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="55">
            
            

            

            <code class="ruby">        end_date = meeting_time[&#39;endDate&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="56">
            
            

            

            <code class="ruby">        if [start_time, end_time, start_date, end_date].any?{|e| e.nil?}</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="57">
            
            

            

            <code class="ruby">          c.meetingtime_start = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="58">
            
            

            

            <code class="ruby">          c.meetingtime_end = nil</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="59">
            
            

            

            <code class="ruby">        else</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="60">
            
            

            

            <code class="ruby">          zone = &quot;Central Time (US &amp; Canada)&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="61">
            
            

            

            <code class="ruby">          c.meetingtime_start = ActiveSupport::TimeZone[zone].strptime(&quot;#{start_date} #{start_time}&quot;, &quot;%m/%d/%Y %H%M&quot;).utc</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="62">
            
            

            

            <code class="ruby">          c.meetingtime_end = ActiveSupport::TimeZone[zone].strptime(&quot;#{end_date} #{end_time}&quot;, &quot;%m/%d/%Y %H%M&quot;).utc</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="63">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="64">
            
            

            

            <code class="ruby">        c.meeting_days = []</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="65">
            
            

            

            <code class="ruby">        DAY_ABBREV_MAP.each do |abbrev, full_day|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="66">
            
            

            

            <code class="ruby">          if meeting_time[full_day]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="67">
            
            

            

            <code class="ruby">            c.meeting_days &lt;&lt; abbrev</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="68">
            
            

            

            <code class="ruby">          end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="69">
            
            

            

            <code class="ruby">        end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="70">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="71">
            
            

            

            <code class="ruby">      c.instructors = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="72">
            
            

            

            <code class="ruby">      c.meeting_location = nil</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="73">
            
            

            

            <code class="ruby">      c.subject_id = subject.id</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="74">
            
            

            

            <code class="ruby">      c.term_id = term.id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="75">
            
            

            

            <code class="ruby">      </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="76">
            
            

            

            <code class="ruby">      </code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="77">
            
            

            

            <code class="ruby">      all_courses.append(c)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="78">
            
            

            

            <code class="ruby">      </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="79">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="80">
            
            

            

            <code class="ruby">    all_courses.each(&amp;:save)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="81">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="82">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="83">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def ==(comparison_object)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="84">
            
            

            

            <code class="ruby">    self.attributes == comparison_object.attributes</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="85">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="86">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="87">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="88">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="eac40f5f58d406db0ebfbfb4f76f2813c3143a75">
  <div class="header">
    <h3>app/models/schedule.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>4</b> relevant lines.
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Schedule &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_many :schedule_to_courses, dependent: :delete_all</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_many :courses, through: :schedule_to_courses</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="1572d6b49055e111edc85d212f4f46ab3dacdea8">
  <div class="header">
    <h3>app/models/schedule_to_course.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>3</b> relevant lines.
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class ScheduleToCourse &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :schedule</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :course</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="59a9c4ea6d4843a161beb71122c9422c172c961f">
  <div class="header">
    <h3>app/models/student_action.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>6</b> relevant lines.
      <span class="green"><b>6</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;date&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="2">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">class StudentAction &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def user</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="10" data-linenumber="5">
            <span class="hits">10</span>
            

            

            <code class="ruby">    User.find(user_id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="8">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def readable_date</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="5" data-linenumber="9">
            <span class="hits">5</span>
            

            

            <code class="ruby">    created_at.in_time_zone(&quot;America/Chicago&quot;).strftime(&#39;%I:%M%p %m/%d/%Y&#39;)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="4a1c864b941f306fc4fecff125e2bc2dc43ee8f0">
  <div class="header">
    <h3>app/models/subject.rb</h3>
    <h4>
      <span class="red">
  61.54%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>13</b> relevant lines.
      <span class="green"><b>8</b> lines covered</span> and
      <span class="red"><b>5</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Subject &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :term</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_many :courses</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def self.ImportSubjectsForTerm!(term)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="6">
            <span class="hits">7</span>
            

            

            <code class="ruby">    json = CourseScraper.get_subjects(term.term_code)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="7">
            <span class="hits">7</span>
            

            

            <code class="ruby">    all_subjects = []</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="8">
            <span class="hits">7</span>
            

            

            <code class="ruby">    json.each do |subject_json|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="9">
            
            

            

            <code class="ruby">      s = Subject.new</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="10">
            
            

            

            <code class="ruby">      s.subject_code = subject_json[&#39;code&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="11">
            
            

            

            <code class="ruby">      s.subject_description = subject_json[&#39;description&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="12">
            
            

            

            <code class="ruby">      s.term_id = term.id</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="13">
            
            

            

            <code class="ruby">      all_subjects.append(s)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="15">
            <span class="hits">7</span>
            

            

            <code class="ruby">    all_subjects.each(&amp;:save)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="0bcdf1d7f3a7dbfb473d8769c7240e658b42e39e">
  <div class="header">
    <h3>app/models/term.rb</h3>
    <h4>
      <span class="red">
  39.13%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>23</b> relevant lines.
      <span class="green"><b>9</b> lines covered</span> and
      <span class="red"><b>14</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Term &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_many :courses</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_many :subjects</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_many :cohorts</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def self.ImportTermList!</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="7">
            
            

            

            <code class="ruby">    json_terms = CourseScraper.get_terms</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="8">
            
            

            

            <code class="ruby">    json_terms.each do |json_term|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="9">
            
            

            

            <code class="ruby">      term = Term.new</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="10">
            
            

            

            <code class="ruby">      term.name = json_term[&#39;description&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="11">
            
            

            

            <code class="ruby">      term.term_code = json_term[&#39;code&#39;]</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">      begin</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="13">
            
            

            

            <code class="ruby">        term.save</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">      rescue ActiveRecord::RecordNotUnique</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="15">
            
            

            

            <code class="ruby">        Rails.logger.debug &quot;Duplicate Term Detected, Ignoring.&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="18">
            
            

            

            <code class="ruby">    active_term = Term.find_by active: 1;</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="19">
            
            

            

            <code class="ruby">    if active_term.nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="20">
            
            

            

            <code class="ruby">      Term.all[0].update_attributes(:active =&gt; true)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="21">
            
            

            

            <code class="ruby">      Term.update_all opendate: DateTime.yesterday</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="22">
            
            

            

            <code class="ruby">      Term.update_all closedate: DateTime.yesterday</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby">  # TODO: This will take awhile, it&#39;s probably best to fire it off async</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            
            

            

            <code class="ruby">  # =&gt; and periodically check `Term.courses_import_complete` to determine</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby">  # =&gt; if it is done or not. As it stands, this call will take upwards of 10 min.</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="29">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def import_all_courses!</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="30">
            <span class="hits">7</span>
            

            

            <code class="ruby">    self.subjects.each do |subject|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="31">
            <span class="hits">7</span>
            

            

            <code class="ruby">      print(subject)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="7" data-linenumber="32">
            <span class="hits">7</span>
            

            

            <code class="ruby">      Course.ImportCourses!(self, subject)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="34">
            
            

            

            <code class="ruby">    self.courses_import_complete = true</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="35">
            
            

            

            <code class="ruby">    self.save</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby">  </code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="0c9dd5504f6d3d4dd53ddccc0a3af5bf12da646c">
  <div class="header">
    <h3>app/models/time_slot.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>3</b> relevant lines.
      <span class="green"><b>3</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class TimeSlot &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  belongs_to :cohort</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_many :conflicts, dependent: :delete_all</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="9c6d950d035f066d500a271eb9abe824b9f10e8b">
  <div class="header">
    <h3>app/models/user.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>22</b> relevant lines.
      <span class="green"><b>22</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class User &lt; ApplicationRecord</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_secure_password</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_many :schedules, dependent: :destroy</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  has_one :cohort</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">  validates :email, presence: true,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby">                    uniqueness: true</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">  validates :password, presence: true,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">                       length: { within: 4..20 },</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">                       confirmation: true,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">                       if: :password_digest_changed?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="12">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def email=(value)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="151" data-linenumber="13">
            <span class="hits">151</span>
            

            

            <code class="ruby">    value = value.strip.downcase</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="151" data-linenumber="14">
            <span class="hits">151</span>
            

            

            <code class="ruby">    write_attribute :email, value</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">  # role-based authorization</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="18">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def student?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="252" data-linenumber="19">
            <span class="hits">252</span>
            

            

            <code class="ruby">    role == &#39;student&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="22">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def admin?</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="449" data-linenumber="23">
            <span class="hits">449</span>
            

            

            <code class="ruby">    role == &#39;admin&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby">  # password_reset email, should expire after sometime.</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="27">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def send_password_reset</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="28">
            <span class="hits">2</span>
            

            

            <code class="ruby">    generate_token(:password_reset_token)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="29">
            <span class="hits">2</span>
            

            

            <code class="ruby">    update_attributes!(password_reset_sent_at: Time.zone.now)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="30">
            <span class="hits">2</span>
            

            

            <code class="ruby">    UserMailer.password_reset(self).deliver</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="33">
            <span class="hits">1</span>
            

            

            <code class="ruby">  private</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">  # accepts a column name and uses secure random to genearate a random string as token and makes sure token is unique.</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="36">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def generate_token(column)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="37">
            <span class="hits">2</span>
            

            

            <code class="ruby">    loop do</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="38">
            <span class="hits">2</span>
            

            

            <code class="ruby">      self[column] = SecureRandom.urlsafe_base64</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="39">
            <span class="hits">2</span>
            

            

            <code class="ruby">      break unless User.exists?(column =&gt; self[column])</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
      </div>
    </div>
  </body>
</html>
